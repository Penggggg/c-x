!function(e){function t(t){for(var a,i,o=t[0],u=t[1],s=t[2],f=0,d=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);for(c&&c(t);d.length;)d.shift()();return l.push.apply(l,s||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(l.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},l=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/build";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var c=u;l.push([460,1]),n()}({117:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuery=function(e){if(!e)return{};try{var t={};return(e.startsWith("?")?e.slice(1):e).split("&").map((function(e){var n,r=e.split("="),l=r[0],i=r[1];t=a(a({},t),((n={})[l]=i,n))})),t}catch(e){return{}}}},136:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(828);t.AppHeader=r.AppHeader;var l=n(427);t.TaskItem=l.TaskItem;var i=a(n(834));t.OrgModal=i.default;var o=n(846);t.AppBreadcrumb=o.AppBreadcrumb;var u=n(847);t.LabelTaskCreate=u.LabelTaskCreate;var s=n(901);t.MyImgDetectTag=s.MyImgDetectTag;var c=n(902);t.MyImgLabelTag=c.MyImgLabelTag;var f=n(903);t.MyTxtLabelTag=f.MyTxtLabelTag;var d=n(904);t.MyVoiceLabelText=d.MyVoiceLabelText},195:function(e,t,n){"use strict";n.r(t),t.default="/dist/build/img/bg-2.jpg"},426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="test".toLowerCase().includes("prod");t.systems={Datasets:a?"http://drive.research.cvte.cn/":"http://10.22.21.26:9081/#/dashboard",Sys:a?"http://server.research.cvte.cn":"http://10.22.21.27:8090"},t.templte2Front={image_classification:"img-tag",voice:"voice",detection:"detection-tag",txt:"txt"},t.fileType2Mime={"图片":"image/jpeg,image/png,image/jpg,image/bmp","文本":"application/json,text/plain,text/plain;charset=utf-8","音频":"audio/mpeg,audio/aav,audio/wav","视频":"video/mpeg,video/x-msvideo"}},427:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(31),i=n(18);n(832),t.TaskItem=function(e){var t=e.id,a=e.title,o=e.bg,u=e.desc,s=e.onClick,c=e.onDelete,f=e.center,d=e.showAction;return r.default.createElement("div",{className:"con-label-task-item "+(d?"showAction":""),onClick:function(){return!!s&&s()}},r.default.createElement(i.Card,{hoverable:!0,className:"label-task-item",cover:r.default.createElement("div",{className:"cover"},r.default.createElement("img",{src:o||n(195).default}),r.default.createElement("div",{className:"cover-text"},f||a[0]))},r.default.createElement(i.Card.Meta,{title:r.default.createElement(i.Tooltip,{title:a},r.default.createElement("div",null,a)),description:u})),r.default.createElement("div",{className:"action-block"},r.default.createElement(i.Button,{type:"danger",onClick:function(e){return function(e){e.stopPropagation(),i.Modal.confirm({title:"提示",content:"确定删除吗？",onOk:function(){l.http.post({data:{label_task_id:t||""},successMsg:"删除成功",url:"/t-apis/admin/labeltask/delete"}).then((function(e){200===e.status&&c&&c()}))}})}(e)}},"删除")))}},460:function(e,t,n){e.exports=n(461)},461:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=a(n(10)),i=n(468);n(919),l.render(r.createElement(i.App,null),document.getElementById("example"))},468:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),l=a(n(0)),i=n(48),o=n(797),u=n(907),s=n(910),c=n(72),f=n(136);n(917);var d=r.Menu.SubMenu,p=r.Layout.Content,m=r.Layout.Sider;t.App=function(){var e=l.useState(!0),t=e[0],n=(e[1],l.useState([])),a=n[0],g=n[1],h=l.useMemo((function(){return[{title:"标注任务",icon:"bar-chart",url:"/base/entry"}]}),[]);return l.useEffect((function(){var e=window.location.pathname;if(e){var t=h.findIndex((function(t){return t.url.includes(e)}));g([String(t)])}}),[]),l.default.createElement(c.StoreProvider,null,l.default.createElement(i.BrowserRouter,null,l.default.createElement(r.Layout,{className:"p-base",style:{height:"100vh"}},l.default.createElement(f.AppHeader,{showUser:!0}),l.default.createElement(r.Layout,null,l.default.createElement(m,{width:t?200:0},l.default.createElement(r.Menu,{mode:"inline",selectedKeys:a,style:{height:"100%",borderRight:0},defaultOpenKeys:h.map((function(e){return e.title})),onClick:function(e){return g([e.key])}},h.map((function(e,t){return e.items?l.default.createElement(d,{key:e.title,title:l.default.createElement("span",null,l.default.createElement(r.Icon,{type:e.icon})," ",e.title)},e.items.map((function(e,n){return l.default.createElement(r.Menu.Item,{key:t+"-"+n},l.default.createElement(i.Link,{to:e.url},e.title))}))):l.default.createElement(r.Menu.Item,{key:t},l.default.createElement(i.Link,{to:e.url},l.default.createElement(r.Icon,{type:e.icon}),e.title))})))),l.default.createElement(r.Layout,{style:{padding:"0 24px 24px"}},l.default.createElement(p,{style:{margin:0,padding:24,background:"#fff"}},l.default.createElement(i.Switch,null,l.default.createElement(i.Route,{path:"/task",component:u.Task}),l.default.createElement(i.Route,{path:"/base",component:o.Base}),l.default.createElement(i.Route,{path:"/label",component:s.Label}),l.default.createElement(i.Redirect,{exact:!0,from:"/",to:"/base/entry"}))))))))}},528:function(e,t,n){var a={"./af":222,"./af.js":222,"./ar":223,"./ar-dz":224,"./ar-dz.js":224,"./ar-kw":225,"./ar-kw.js":225,"./ar-ly":226,"./ar-ly.js":226,"./ar-ma":227,"./ar-ma.js":227,"./ar-sa":228,"./ar-sa.js":228,"./ar-tn":229,"./ar-tn.js":229,"./ar.js":223,"./az":230,"./az.js":230,"./be":231,"./be.js":231,"./bg":232,"./bg.js":232,"./bm":233,"./bm.js":233,"./bn":234,"./bn.js":234,"./bo":235,"./bo.js":235,"./br":236,"./br.js":236,"./bs":237,"./bs.js":237,"./ca":238,"./ca.js":238,"./cs":239,"./cs.js":239,"./cv":240,"./cv.js":240,"./cy":241,"./cy.js":241,"./da":242,"./da.js":242,"./de":243,"./de-at":244,"./de-at.js":244,"./de-ch":245,"./de-ch.js":245,"./de.js":243,"./dv":246,"./dv.js":246,"./el":247,"./el.js":247,"./en-SG":248,"./en-SG.js":248,"./en-au":249,"./en-au.js":249,"./en-ca":250,"./en-ca.js":250,"./en-gb":251,"./en-gb.js":251,"./en-ie":252,"./en-ie.js":252,"./en-il":253,"./en-il.js":253,"./en-nz":254,"./en-nz.js":254,"./eo":255,"./eo.js":255,"./es":256,"./es-do":257,"./es-do.js":257,"./es-us":258,"./es-us.js":258,"./es.js":256,"./et":259,"./et.js":259,"./eu":260,"./eu.js":260,"./fa":261,"./fa.js":261,"./fi":262,"./fi.js":262,"./fo":263,"./fo.js":263,"./fr":264,"./fr-ca":265,"./fr-ca.js":265,"./fr-ch":266,"./fr-ch.js":266,"./fr.js":264,"./fy":267,"./fy.js":267,"./ga":268,"./ga.js":268,"./gd":269,"./gd.js":269,"./gl":270,"./gl.js":270,"./gom-latn":271,"./gom-latn.js":271,"./gu":272,"./gu.js":272,"./he":273,"./he.js":273,"./hi":274,"./hi.js":274,"./hr":275,"./hr.js":275,"./hu":276,"./hu.js":276,"./hy-am":277,"./hy-am.js":277,"./id":278,"./id.js":278,"./is":279,"./is.js":279,"./it":280,"./it-ch":281,"./it-ch.js":281,"./it.js":280,"./ja":282,"./ja.js":282,"./jv":283,"./jv.js":283,"./ka":284,"./ka.js":284,"./kk":285,"./kk.js":285,"./km":286,"./km.js":286,"./kn":287,"./kn.js":287,"./ko":288,"./ko.js":288,"./ku":289,"./ku.js":289,"./ky":290,"./ky.js":290,"./lb":291,"./lb.js":291,"./lo":292,"./lo.js":292,"./lt":293,"./lt.js":293,"./lv":294,"./lv.js":294,"./me":295,"./me.js":295,"./mi":296,"./mi.js":296,"./mk":297,"./mk.js":297,"./ml":298,"./ml.js":298,"./mn":299,"./mn.js":299,"./mr":300,"./mr.js":300,"./ms":301,"./ms-my":302,"./ms-my.js":302,"./ms.js":301,"./mt":303,"./mt.js":303,"./my":304,"./my.js":304,"./nb":305,"./nb.js":305,"./ne":306,"./ne.js":306,"./nl":307,"./nl-be":308,"./nl-be.js":308,"./nl.js":307,"./nn":309,"./nn.js":309,"./pa-in":310,"./pa-in.js":310,"./pl":311,"./pl.js":311,"./pt":312,"./pt-br":313,"./pt-br.js":313,"./pt.js":312,"./ro":314,"./ro.js":314,"./ru":315,"./ru.js":315,"./sd":316,"./sd.js":316,"./se":317,"./se.js":317,"./si":318,"./si.js":318,"./sk":319,"./sk.js":319,"./sl":320,"./sl.js":320,"./sq":321,"./sq.js":321,"./sr":322,"./sr-cyrl":323,"./sr-cyrl.js":323,"./sr.js":322,"./ss":324,"./ss.js":324,"./sv":325,"./sv.js":325,"./sw":326,"./sw.js":326,"./ta":327,"./ta.js":327,"./te":328,"./te.js":328,"./tet":329,"./tet.js":329,"./tg":330,"./tg.js":330,"./th":331,"./th.js":331,"./tl-ph":332,"./tl-ph.js":332,"./tlh":333,"./tlh.js":333,"./tr":334,"./tr.js":334,"./tzl":335,"./tzl.js":335,"./tzm":336,"./tzm-latn":337,"./tzm-latn.js":337,"./tzm.js":336,"./ug-cn":338,"./ug-cn.js":338,"./uk":339,"./uk.js":339,"./ur":340,"./ur.js":340,"./uz":341,"./uz-latn":342,"./uz-latn.js":342,"./uz.js":341,"./vi":343,"./vi.js":343,"./x-pseudo":344,"./x-pseudo.js":344,"./yo":345,"./yo.js":345,"./zh-cn":346,"./zh-cn.js":346,"./zh-hk":347,"./zh-hk.js":347,"./zh-tw":348,"./zh-tw.js":348};function r(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id=528},72:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(825),l=a(n(826)),i=a(n(827)),o=r.createStore({User:i.default,LabelImg:l.default}),u=o.useStore,s=o.StoreProvider;t.useStore=u,t.StoreProvider=s},797:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(48),i=n(798),o=n(906);t.Base=function(e){e.location;return r.default.createElement("div",{style:{height:"100%",overflowY:"scroll"}},r.default.createElement(l.Route,{path:"/base/entry",component:i.Entry}),r.default.createElement(l.Route,{path:"/base/test",component:o.TestPage}))}},798:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),l=n(95),i=n(52),o=a(n(0)),u=n(18),s=n(72),c=n(426),f=n(136);t.Entry=function(){var e=r.useHistory(),t=s.useStore().User,a=o.useRef(null),d=o.useRef({}),p=i.useFetch({url:"/t-apis/admin/labeltask/list"}),m=p[0],g=p[1],h=o.useState(!1),v=h[0],y=h[1],b=function(e){void 0===e&&(e=1),g.load({params:{page_num:e,page_size:9}}).then((function(e){return d.current=e}))},_=function(){var e=d.current;if(e){var t=e.pagination.page_num;b(t)}},k=function(){_(),y(!1)};return o.useEffect((function(){return b(),a.current=setInterval(_,8e3),function(){var e=a.current;e&&clearInterval(e)}}),[]),l.useObserver((function(){return o.default.createElement("div",{className:"animated fadeIn p-base-entry"},o.default.createElement(u.PageHeader,{title:"标注任务",subTitle:o.default.createElement("div",null,o.default.createElement(u.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:5,marginLeft:0}}),(m.results||[]).length>0?"点击任务，进入标注":"点击「创建」")}),o.default.createElement(u.Spin,{spinning:g.isLoading},o.default.createElement("div",{style:{padding:"20px 20px 0"}},o.default.createElement(u.Row,{gutter:[30,30]},o.default.createElement(u.Col,{span:8},o.default.createElement(f.TaskItem,{title:"创建",desc:"新的标注任务",bg:n(905).default,center:o.default.createElement(u.Icon,{type:"plus",style:{fontSize:40}}),onClick:function(){return y(!0)}})),(m.results||[]).filter((function(e){return e.role>0})).map((function(n,a){return o.default.createElement(u.Col,{span:8,key:a},o.default.createElement(f.TaskItem,{id:n.id,title:n.name,onDelete:_,onClick:function(){return function(t){var n=m.results[t],a=n.id,r=n.status,l=n.name,i=n.label_template,o=c.templte2Front[i];return 0===r?u.notification.info({message:"提示",description:"任务初始化中，请稍等"}):o?void e.push("/label/working?taskId="+a+"&name="+l+"&template="+o):u.notification.error({message:"提示",description:"暂无对应模板，请联系工程组"})}(a)},desc:"类型："+n.label_template,showAction:t.account.login_name===n.create_user}))}))),o.default.createElement("div",{style:{width:"100%",display:"flex",marginTop:50,justifyContent:"center"}},!!m.pagination&&o.default.createElement(u.Pagination,{simple:!0,defaultCurrent:1,pageSize:9,onChange:b,total:m.pagination.total})))),o.default.createElement(f.LabelTaskCreate,{show:v,onCancel:k}))}))}},81:function(e,t,n){"use strict";var a,r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.user=0]="user",e[e.org=1]="org",e[e.custom=2]="custom"}(a||(a={})),t.EOrgUserType=a,function(e){e[e.noRole=0]="noRole",e[e.read=1]="read",e[e.label=2]="label",e[e.use=3]="use"}(r||(r={})),t.ETaskRole=r},826:function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var r,l=arguments.length,i=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(l<3?r(i):l>3?r(t,n,i):r(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var l=n(42),i=function(){function e(){var e=this;this.selectedEntryFile=null,this.setselectedEntryFile=function(t){e.selectedEntryFile=t}}return a([l.observable,r("design:type",Object)],e.prototype,"selectedEntryFile",void 0),a([l.action,r("design:type",Object)],e.prototype,"setselectedEntryFile",void 0),e}();t.default=new i},827:function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var r,l=arguments.length,i=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(l<3?r(i):l>3?r(t,n,i):r(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var l=n(42),i=(n(81),function(){function e(){this.account={},this.taskRole=0}return e.prototype.setRole=function(e){console.log("当前任务权限："+e),this.taskRole=e},e.prototype.setAccount=function(e){this.account=e},a([l.observable,r("design:type",Object)],e.prototype,"account",void 0),a([l.observable,r("design:type",Number)],e.prototype,"taskRole",void 0),a([l.action,r("design:type",Function),r("design:paramtypes",[Number]),r("design:returntype",void 0)],e.prototype,"setRole",null),a([l.action,r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],e.prototype,"setAccount",null),e}());t.default=new i},828:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),l=n(95),i=n(31),o=a(n(0)),u=n(18),s=n(72);n(829);var c={showUser:!0},f=u.Layout.Header,d=u.Menu.SubMenu;t.AppHeader=function(e){var t=(void 0===e?c:e).showUser,a=r.useHistory(),p=s.useStore().User,m=o.useState({}),g=m[0],h=m[1],v=function(){var e=window.location,t=e.host,n=e.protocol;return window.location.href=n+"//"+t+"/apis/common/ai-logout"},y=o.useMemo((function(){var e=[];return e.push({icon:"setting",title:"操作指引",items:[{title:"标注任务",url:"/base/entry"}]}),e}),[]);return o.useEffect((function(){t&&i.http.get({url:"/t-apis/user_info"}).then((function(e){var t=e.status,n=e.data;200===t&&(h(n),p.setAccount(n))}))}),[t]),l.useObserver((function(){return o.default.createElement(f,null,o.default.createElement("div",{className:"con-app-header"},o.default.createElement("div",{className:"content-block"},o.default.createElement("div",{className:"logo-block"},o.default.createElement("img",{className:"logo",src:n(831).default}),o.default.createElement("a",{className:"title"},"在线标注平台")),o.default.createElement("div",{className:"menu-block"},o.default.createElement(u.Menu,{theme:"dark",mode:"horizontal"},y.map((function(e,t){return o.default.createElement(d,{key:t,title:o.default.createElement("span",{className:"submenu-title-wrapper"},!!e.icon&&o.default.createElement(u.Icon,{type:e.icon}),e.title)},(e.items||[]).map((function(e,t){return o.default.createElement(u.Menu.Item,{onClick:function(){return!!e.url&&a.push(e.url)},key:t},e.title)})))}))))),t&&o.default.createElement("div",{className:"user-block"},o.default.createElement(u.Dropdown,{overlay:o.default.createElement(u.Menu,null,o.default.createElement(u.Menu.Item,null,o.default.createElement("a",{onClick:v},"退出登陆 ",o.default.createElement(u.Icon,{type:"arrow-right"}))))},o.default.createElement(u.Avatar,{size:"large",style:{color:"#fff",backgroundColor:"#1890ff"}},g.username)))))}))}},829:function(e,t,n){var a=n(27),r=n(830);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},830:function(e,t,n){(t=n(28)(!1)).push([e.i,".con-app-header {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.con-app-header .content-block {\n  display: flex;\n  align-items: center;\n}\n.con-app-header .content-block .logo-block {\n  display: flex;\n  align-items: flex-end;\n}\n.con-app-header .content-block .logo-block .logo {\n  height: 25px;\n  width: 80px;\n  margin-right: 10px;\n}\n.con-app-header .content-block .logo-block .title {\n  color: #fff;\n  font-size: 18px;\n  line-height: 18px;\n  display: inline-block;\n  letter-spacing: 0.05em;\n  margin-bottom: 2px;\n}\n.con-app-header .content-block .menu-block {\n  margin-left: 20px;\n}\n",""]),e.exports=t},831:function(e,t,n){"use strict";n.r(t),t.default="/dist/build/img/cvte.png"},832:function(e,t,n){var a=n(27),r=n(833);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},833:function(e,t,n){(t=n(28)(!1)).push([e.i,".con-label-task-item {\n  overflow: hidden;\n  position: relative;\n}\n.con-label-task-item .label-task-item .cover {\n  position: relative;\n}\n.con-label-task-item .label-task-item .cover img {\n  width: 100%;\n}\n.con-label-task-item .label-task-item .cover .cover-text {\n  top: 50%;\n  left: 50%;\n  color: #fff;\n  font-size: 30px;\n  font-weight: bold;\n  position: absolute;\n  transform: translate(-50%, -50%);\n  text-shadow: 0 0 6px rgba(0, 0, 0, 0.5);\n}\n.con-label-task-item .action-block {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 94px;\n  position: absolute;\n  box-sizing: border-box;\n  transition: all ease 0.4s;\n  transform: translateY(100%);\n  background: rgba(0, 0, 0, 0.4);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.con-label-task-item.hide {\n  display: none;\n}\n.con-label-task-item.showAction:hover .action-block {\n  transform: translateY(0);\n}\n",""]),e.exports=t},834:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=r(n(0)),u=l(n(835)),s=l(n(838)),c=l(n(841)),f=n(81);n(844);t.default=o.default.memo((function(e){var t=e.show,n=e.onCancel,r=e.onConfirm,l=o.useState(0),d=l[0],p=l[1],m=o.useState(""),g=m[0],h=m[1],v=o.useState(""),y=v[0],b=v[1],_=o.useState([]),k=_[0],E=_[1],j=o.useState({name:"",account:""}),w=j[0],O=j[1],M=o.useState([]),T=M[0],x=M[1],S=o.useState([]),I=S[0],R=S[1],C=o.useRef(null),P=o.useRef(null),A=o.useRef(null);return o.default.createElement("div",null,o.default.createElement(i.Modal,{width:1e3,visible:t,onOk:function(){r&&(d===f.EOrgUserType.user?r({type:f.EOrgUserType.user,value:T,detail:I}):d===f.EOrgUserType.org?r({type:f.EOrgUserType.org,detail:k,value:k.map((function(e){return e.orgId}))}):d===f.EOrgUserType.custom&&r({type:f.EOrgUserType.custom,detail:{},value:[g]})),p(0),b(""),R([]),E([]),x([]),h(""),O({name:"",account:""});try{A.current.reset(),C.current.reset(),P.current.reset()}catch(e){}},title:"选择用户/组织",className:"c-org-modal",onCancel:function(){return!!n&&n()}},o.default.createElement("div",{className:"type-selector"},"选择纬度：",o.default.createElement(i.Radio.Group,{value:d,onChange:function(e){return p(e.target.value)}},o.default.createElement(i.Radio,{value:f.EOrgUserType.user},"用户"),o.default.createElement(i.Radio,{value:f.EOrgUserType.org},"组织"),o.default.createElement(i.Radio,{value:f.EOrgUserType.custom},"自定义"))),o.default.createElement(i.Layout,{className:"layout-con",style:{justifyContent:d===f.EOrgUserType.org?"center":"start"}},d===f.EOrgUserType.custom&&o.default.createElement("div",null,o.default.createElement(i.Input,{value:g,placeholder:"请输入账号",onChange:function(e){return h(e.target.value)}})),(d===f.EOrgUserType.user||d===f.EOrgUserType.org)&&o.default.createElement("div",{className:"tree-con",style:{maxWidth:d===f.EOrgUserType.org?"none":"200px"}},o.default.createElement(u.default,{ref:A,canSelect:d===f.EOrgUserType.org,onTreeChoice:b,onTreeSlect:E})),d===f.EOrgUserType.user&&o.default.createElement("div",{className:"table-con"},o.default.createElement(c.default,{ref:C,initValue:w,onFilterChange:O}),o.default.createElement("div",{className:"table"},o.default.createElement(s.default,a({ref:P},w,{orgId:y,onSelect:function(e,t){R(t),x(e)}})))))))}))},835:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var l=arguments[t],i=0,o=l.length;i<o;i++,r++)a[r]=l[i];return a},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=n(31),u=l(n(0));n(836);var s=[],c={},f={},d=u.default.forwardRef((function(e,t){var n=e.onTreeChoice,l=e.canSelect,d=e.onTreeSlect,p=u.useState([]),m=p[0],g=p[1],h=u.useState([]),v=h[0],y=h[1],b=u.useState(null),_=b[0],k=b[1],E=u.useState(s),j=E[0],w=E[1],O=u.useState([]),M=O[0],T=O[1],x=function(e){var t=[],n=e.reduce((function(e,t){return e[t.id]||(e[t.id]=t),e}),{});return e.map((function(e){if("-1"===e.parentId)t.push(e);else{var a=n[e.parentId];a&&(a.children=a.children||[],a.children.push(e))}})),t},S=function(e){return e.map((function(e){return e.children?u.default.createElement(i.Tree.TreeNode,{key:e.orgId,title:e.orgName},S(e.children)):u.default.createElement(i.Tree.TreeNode,{key:e.orgId,title:e.orgName})}))};return u.useEffect((function(){new Promise((function(e){if(j.length>0)return e(j);o.http.get({params:{},url:"/apis/common/org/dimension"}).then((function(t){t.status;var n=t.data.map((function(e){return{value:e.id,label:e.dimensionName}}));s=n,w(n),e(n)}))})).then((function(e){var t=e[0].value;!function(e){var t=c[e],n=f[e];if(t)return g(t),y(n);o.http.get({params:{dimensionId:e},url:"/apis/common/org/tree"}).then((function(t){t.status;var n,r,l=t.data,i=x(l);g(i),y(l),c=a(a({},c),((n={})[e]=i,n)),f=a(a({},f),((r={})[e]=l,r))}))}(t),k(t)}))}),[]),u.useImperativeHandle(t,(function(){return{reset:function(){T([])}}})),u.default.createElement("div",{className:"c-org-tree"},u.default.createElement(i.Select,{value:_,style:{width:120},onChange:k,placeholder:"请选择组织架构纬度",className:"dimension-opt"},j.map((function(e,t){return u.default.createElement(i.Select.Option,{key:e.value,value:e.value},e.label)}))),u.default.createElement(i.Tree,{onCheck:function(e){var t=[],n=e.map((function(e){return v.find((function(t){return t.orgId===e}))})),l=function(e,t){return!(!Array.isArray(e.children)||0===e.children.length)&&e.children.some((function(e){return e===t||(Array.isArray(e.children)&&e.children.length>0?l(e,t):e===t)}))},i=n.find((function(e){return Array.isArray(e.children)&&e.children.length>0}));i&&t.push(i);var o=n.filter((function(e){return e!==i})).filter((function(e){return Array.isArray(e.children)&&e.children.length>0})).filter((function(e){return!i||!l(i,e)})),u=n.filter((function(e){return e!==i})).filter((function(e){return!e.children}));o.concat(u).map((function(e){t.some((function(t){return l(t,e)}))||(t=r(t,[e]))})),t=t.map((function(e){var t=a({},e);return delete t.children,t})),T(e),d&&d(t)},checkable:l,onSelect:function(e){n&&n(e[0])},checkedKeys:M},S(m)))}));t.default=u.default.memo(d)},836:function(e,t,n){var a=n(27),r=n(837);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},837:function(e,t,n){(t=n(28)(!1)).push([e.i,".c-org-tree {\n  display: flex;\n  flex-direction: column;\n}\n.c-org-tree .dimension-opt {\n  margin: 0 0 15px;\n}\n",""]),e.exports=t},838:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),l=a(n(0)),i=n(18);n(839);var o=l.default.forwardRef((function(e,t){var n=e.orgId,a=e.name,o=e.account,u=e.onSelect,s=l.useState(10)[0],c=l.useState(0),f=c[0],d=c[1],p=l.useState(0),m=p[0],g=p[1],h=l.useState([]),v=h[0],y=h[1],b=l.useState([]),_=b[0],k=b[1],E=l.useState([]),j=E[0],w=E[1],O=function(e){if(n||a||o){var t={pageNum:void 0!==e?e:m+1,pageSize:s,orgId:n,name:a,account:o};Object.keys(t).map((function(e){void 0===t[e]&&delete t[e]})),r.http.get({params:t,url:"/apis/common/org/users"}).then((function(e){var t=e.data,n=t.pagination,a=t.rows;y(a),d(n.total),g(n.pageNum)}))}};return l.useEffect((function(){g(0),O(1)}),[n,a,o]),l.useEffect((function(){u&&u(_,j)}),[_]),l.useImperativeHandle(t,(function(){return{reset:function(){y([]),d(0),g(0),k([]),w([])}}})),l.default.createElement("div",{className:"c-org-users"},l.default.createElement(i.Table,{size:"middle",rowKey:"account",dataSource:v,columns:[{title:"姓名",dataIndex:"name",key:"name"},{title:"用户账号",dataIndex:"account",key:"account"},{title:"手机号码",dataIndex:"telephone",key:"telephone"},{title:"邮箱地址",dataIndex:"email",key:"email"}],pagination:{total:f,simple:!0},onChange:function(e){return O(e.current)},rowSelection:{selectedRowKeys:_,onChange:function(e,t){w(t),k(e)}}}))}));t.default=l.default.memo(o)},839:function(e,t,n){var a=n(27),r=n(840);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},840:function(e,t,n){(t=n(28)(!1)).push([e.i,".c-org-users {\n  background: #fff;\n}\n",""]),e.exports=t},841:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),l=a(n(0));n(842);var i=l.default.forwardRef((function(e,t){var n=e.onFilterChange,a=e.initValue;l.useImperativeHandle(t,(function(){return{reset:function(){u(""),f("")}}}));var i=l.useState(""),o=i[0],u=i[1],s=l.useState(""),c=s[0],f=s[1],d=function(){n&&n({name:o,account:c})};return l.useEffect((function(){var e=a||{},t=e.name,n=e.account;u(t),f(n)}),[]),l.default.createElement("div",{className:"c-org-search"},l.default.createElement("div",{className:"line"},l.default.createElement("div",{className:"line-item mr"},l.default.createElement("span",null,"域账号："),l.default.createElement(r.Input,{value:c,onPressEnter:d,onChange:function(e){return f(e.target.value)}})),l.default.createElement("div",{className:"line-item mr"},l.default.createElement("span",null,"姓名："),l.default.createElement(r.Input,{value:o,onPressEnter:d,onChange:function(e){return u(e.target.value)}})),l.default.createElement(r.Button,{type:"primary",onClick:d},"搜索")))}));t.default=l.default.memo(i)},842:function(e,t,n){var a=n(27),r=n(843);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},843:function(e,t,n){(t=n(28)(!1)).push([e.i,".c-org-search .line {\n  display: flex;\n  align-items: center;\n}\n.c-org-search .line .line-item {\n  flex: 1;\n  display: flex;\n  align-items: center;\n}\n.c-org-search .line .line-item span {\n  white-space: nowrap;\n}\n.c-org-search .line .line-item.mr {\n  margin-right: 10px;\n}\n",""]),e.exports=t},844:function(e,t,n){var a=n(27),r=n(845);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},845:function(e,t,n){(t=n(28)(!1)).push([e.i,".c-org-modal .type-selector {\n  margin-bottom: 15px;\n}\n.c-org-modal .layout-con {\n  padding: 20px;\n  display: flex;\n  background: #fff;\n  flex-direction: row;\n}\n.c-org-modal .layout-con .tree-con {\n  margin-right: 15px;\n  max-width: 200px;\n  overflow-x: scroll;\n}\n.c-org-modal .layout-con .table-con {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.c-org-modal .layout-con .table-con .table {\n  margin-top: 15px;\n}\n",""]),e.exports=t},846:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(48),i=n(18);t.AppBreadcrumb=function(){var e=r.useState([]),t=e[0],n=e[1],a={dataset:{label:"数据集",to:"/base/dataset/list"},algorithm:{label:"算法管理",to:"/base/algorithm/list"},train:{label:"训练管理",to:"/base/train/list"},deploy:{label:"部署管理",to:"/base/deploy/list"},model:{label:"模型管理"},swagger:{label:"在线文档"}};return r.useEffect((function(){setInterval((function(){return function(){var e=[];window.location.pathname.split("/").filter((function(e){return!!e})).map((function(t){a[t]&&e.push(a[t])}));var r=e.some((function(e,n){return e!==t[n]}));if(e.length!==t.length||r)return n(e)}()}),500)}),[]),r.default.createElement(i.Breadcrumb,null,r.default.createElement(i.Breadcrumb.Item,{href:""},r.default.createElement(i.Icon,{type:"home"})),t.map((function(e,n){return r.default.createElement(i.Breadcrumb.Item,{key:n},n!==t.length-1&&e.to?r.default.createElement(l.Link,{to:e.to},e.label):e.label)})))}},847:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),l=n(18),i=a(n(0)),o=n(52),u=n(36),s=n(426);t.LabelTaskCreate=function(e){var t=e.show,n=e.onCancel,a=i.useState(!1),c=a[0],f=a[1],d=o.useList({listUrl:"/t-apis/admin/srcdata/list"}),p=d[0],m=d[1],g=o.useFetch({url:"/t-apis/admin/templates"}),h=g[0],v=g[1],y=function(){window.open(s.systems.Datasets)},b=i.useMemo((function(){return[{title:"基础信息",formItems:[{key:"name",label:"任务名称",type:"input",placeholder:"请填写任务名称",rules:[{required:!0,message:"请填写任务名称"}]},{key:"description",label:"描述",type:"textarea",placeholder:"请填写描述",rules:[]}]},{title:"标注相关",formItems:[{key:"fileType",label:"文件类型",type:"select",placeholder:"请选择标注类型",rules:[{required:!0,message:"请选择标注类型"}],options:Object.keys(s.fileType2Mime).map((function(e){return{label:e,value:e}}))},{key:"label_template",label:"标注模板",type:"select",placeholder:"请选择标注类型",rules:[{required:!0,message:"请选择标注类型"}],options:Object.keys(h).map((function(e){return{label:e,value:e}}))},{key:"src_data",label:"数据目录",type:"selectInput",disabled:[!1,!0],placeholder:"请选择数据目录",defaultValue:[void 0,"data"],options:p.map((function(e){return{label:e.group_name,value:e.group_id}})),extra:i.default.createElement("div",{onClick:y,style:{cursor:"pointer"}},i.default.createElement(l.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:8}}),"查看我的数据集"),rules:[]}]}]}),[h,p]);return i.useEffect((function(){t&&(v.load(""),m.load(""))}),[t]),i.default.createElement(l.Modal,{title:"创建标注任务",width:700,footer:null,visible:t,onCancel:n},i.default.createElement(l.Spin,{size:"large",spinning:m.isLoading},i.default.createElement("div",null,0===p.length&&i.default.createElement("div",null,i.default.createElement(l.Alert,{showIcon:!0,type:"info",message:"提示",description:i.default.createElement("div",{onClick:y,style:{cursor:"pointer"}},i.default.createElement("div",null,"标注任务，需要源数据，点击马上创建"))})),p.length>0&&i.default.createElement("div",{style:{padding:"0 120px"}},i.default.createElement(u.StepsForm,{onOk:function(e){var t=e.name,a=e.description,l=e.fileType,i=e.label_template,o=e.src_data,u={name:t,label_template:i,src_data_path:o[1],description:a||"",src_data_group_id:o[0],file_type_list:s.fileType2Mime[l],src_data_bucket:"dataset-"+p.find((function(e){return e.group_id===o[0]})).matter_id};f(!0),r.http.post({data:u,successMsg:"创建成功",url:"/t-apis/admin/labeltask/new"}).then((function(e){var t=e.status;f(!1),200===t&&n()}))},forms:b,isLoading:c,formName:"label-task-create"})))))}},901:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),l=a(n(0)),i=n(31),o=n(52),u=n(36);t.MyImgDetectTag=function(e){var t=e.type,n=e.height,a=e.canAction,s=e.src,c=e.taskId,f=e.file,d=void 0===f?{}:f,p=e.defaultValues,m=void 0===p?[]:p,g=e.onChange,h=o.useFetch({url:"/t-apis/admin/labeltask/tag",initVal:{default:[]}}),v=h[0],y=h[1],b=function(){y.load("?label_task_id="+c)};return l.useEffect((function(){b()}),[s]),l.default.createElement(u.ImgLabelDetectTag,{src:s,tags:v.default,type:t,height:n,onSave:function(e){var t=e.map((function(e){var t=e.abs,n=e.labels;return{points:[t.x,t.y,t.w,t.h],label:(n||[]).join(",")}})),n={values:t,data_id:d.id,label_task_id:c};if(0===t.length)return r.notification.info({message:"提示",description:"请至少勾出一个框"});i.http.post({data:n,successMsg:"提交成功",url:"/t-apis/admin/labeltask/commit_label"}).then((function(e){200===e.status&&g&&g(n,!1)}))},onDelete:function(e){var t=e.id;i.http.delete({data:{label_id:t},successMsg:"删除成功",url:"/t-apis/admin/labeltask/tag"}).then((function(e){200===e.status&&b()}))},canAction:a,onCreate:function(e){e&&i.http.post({data:{name:e,label_task_id:c,label_propertie:"default"},successMsg:"创建成功",url:"/t-apis/admin/labeltask/tag"}).then((function(e){200===e.status&&b()}))},defaultValues:m})}},902:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(31),i=n(52),o=n(36),u=n(18);t.MyImgLabelTag=function(e){var t=e.type,n=e.height,a=e.canAction,s=e.src,c=e.defaultSelected,f=e.taskId,d=e.file,p=void 0===d?{}:d,m=e.onChange,g=i.useFetch({url:"/t-apis/admin/labeltask/tag",initVal:{default:[]}}),h=g[0],v=g[1],y=function(){v.load("?label_task_id="+f)};return r.useEffect((function(){y()}),[s]),r.default.createElement(o.ImgLabelTag,{src:s,type:t,tags:h.default,height:n,onSave:function(e){var t=e.map((function(e){return{label:e.id}})),n={values:t,data_id:p.id,label_task_id:f};if(0===t.length)return u.notification.info({message:"提示",description:"请至少选择一个标签"});l.http.post({data:n,successMsg:"提交成功",url:"/t-apis/admin/labeltask/commit_label"}).then((function(e){200===e.status&&m&&m(n,!0)}))},onDelete:function(e){var t=e.id;l.http.delete({data:{label_id:t},successMsg:"删除成功",url:"/t-apis/admin/labeltask/tag"}).then((function(e){200===e.status&&y()}))},canAction:a,onCreate:function(e){e&&l.http.post({data:{name:e,label_task_id:f,label_propertie:"default"},successMsg:"创建成功",url:"/t-apis/admin/labeltask/tag"}).then((function(e){200===e.status&&y()}))},defaultSelected:c||[]})}},903:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(31),i=n(52),o=n(36),u=n(18);t.MyTxtLabelTag=function(e){var t=e.canAction,n=void 0===t||t,a=e.params,s=e.defaultValues,c=e.taskId,f=e.file,d=void 0===f?{}:f,p=e.onChange,m=i.useFetch({url:"/t-apis/admin/labeltask/tag",initVal:{default:[]}}),g=m[0],h=m[1],v=function(){h.load("?label_task_id="+c)};return r.useEffect((function(){v()}),[a]),r.default.createElement(o.TextLabelTag,{tags:g.default.reverse().map((function(e){return{id:e.id,val:e.name}})),params:a,onSure:function(e){var t=e,n={values:t,data_id:d.id,label_task_id:c};if(0===t.length)return u.notification.info({message:"提示",description:"请至少选择一个标签"});l.http.post({data:n,successMsg:"提交成功",url:"/t-apis/admin/labeltask/commit_label"}).then((function(e){200===e.status&&p&&p(n,!0)}))},onDelete:function(e){var t=e.id;l.http.delete({data:{label_id:t},successMsg:"删除成功",url:"/t-apis/admin/labeltask/tag"}).then((function(e){200===e.status&&v()}))},canAction:n,onCreate:function(e){e&&l.http.post({data:{name:e,label_task_id:c,label_propertie:"default"},successMsg:"创建成功",url:"/t-apis/admin/labeltask/tag"}).then((function(e){200===e.status&&v()}))},defaultValue:s||[]})}},904:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),l=a(n(0)),i=n(31),o=n(36);t.MyVoiceLabelText=function(e){var t=e.canAction,n=e.src,a=e.defaultValues,u=e.taskId,s=e.file,c=void 0===s?{}:s,f=e.onChange;return l.default.createElement(o.AudioWaveLabel,{tags:[],url:n,onSave:function(e){var t=e.map((function(e){return{label:e.label,"end-time":e.end,"start-time":e.start}})),n={values:t,data_id:c.id,label_task_id:u};if(0===t.length)return r.notification.info({message:"提示",description:"请至少标注一个音段"});i.http.post({data:n,successMsg:"提交成功",url:"/t-apis/admin/labeltask/commit_label"}).then((function(e){200===e.status&&f&&f(n,!1)}))},labeledList:a,canAction:t,onCreateLabel:function(){},onUpdateLabel:function(){},onDeleteLabel:function(){}})}},905:function(e,t,n){"use strict";n.r(t),t.default="/dist/build/img/bg-1.jpg"},906:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(18),i=n(31),o=n(36);t.TestPage=function(){var e=r.useState([{id:"tag-1",val:"主语"},{id:"tag-2",val:"谓语"},{id:"tag-3",val:"宾语"},{id:"tag-4",val:"形容词"}]),t=e[0];e[1];return r.default.createElement("div",null,r.default.createElement(l.Button,{onClick:function(){i.http.get({url:"/t-apis/user_info"})}},"????"),r.default.createElement(o.TextLabelTag,{tags:t,params:["心心念念的往事、曾经深爱过的人、年少琐碎的过往，它们就像缠绕之间的一阵风，来的缱绻，去的时候让人来不及挽留。","我只希望，不管三年，五年，或是十年以后。某一天，我们相遇，还能相认，你大喊一声，我想死你了。那一刻，我定会泪流满面。我们是朋友，永远的朋友。"],defaultValue:[{paramKey:0,offset:0,length:2,tagId:"tag-1"}],onSure:console.log,onDelete:console.log,onUpdate:console.log,onCreate:console.log}))}},907:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(48),i=n(908);t.Task=function(){return r.default.createElement("div",{style:{height:"100%",overflowY:"scroll"}},r.default.createElement(l.Route,{path:"/task/roles",component:i.TaskRole}))}},908:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(95),i=n(52),o=n(36),u=n(31),s=n(18),c=n(48),f=r(n(0)),d=n(72),p=n(81),m=n(117),g=n(909),h=o.MyForm("taskRole-update"),v=o.MyForm("createForm-update");t.TaskRole=function(e){var t=f.useRef(null),n=f.useRef(null),r=c.useHistory(),o=d.useStore().User,y=f.useState(!1),b=y[0],_=y[1],k=f.useState(!1),E=k[0],j=k[1],w=f.useState(""),O=w[0],M=w[1],T=f.useState(""),x=T[0],S=T[1],I=i.useList({listUrl:"/t-apis/admin/labeltask/users"}),R=I[0],C=I[1],P=function(e){var n=e.role,a=e.user_login_name;j(!0),M(a),setTimeout((function(){t.current.setFieldsValue({role:n})}),100)},A=f.useMemo((function(){return u.createColumns(R,R[0],{user_login_name:"用户",role:{title:"权限",render:function(e){return f.default.createElement("a",{style:{color:e.role===p.ETaskRole.noRole?"#f5222d":"#1890ff"}},g.findDicCN("task.role",e.role))}}},{edit:P})}),[R]),L=f.useMemo((function(){return[{key:"role",label:"权限",type:"select",placeholder:"请选择权限",options:g.findDic("task.role"),rules:[{required:!0,message:"请选择权限"}]}]}),[]),N=f.useMemo((function(){return[{key:"accounts",label:"成员",type:"cvtersearch",multipul:!0,placeholder:"请选择成员",query:"login_name",nameKey:"staff_name_zh",accountKey:"staff_alias_name",url:"/t-apis/admin/user/staff",rules:[{required:!0,message:"请选择成员"}]},{key:"role",label:"权限",type:"select",placeholder:"请选择权限",options:g.findDic("task.role"),rules:[{required:!0,message:"请选择权限"}]}]}),[]),z=l.useComputed((function(){var e=R.find((function(e){return e.user_login_name===o.account.login_name}));return!!e&&e.role===p.ETaskRole.use}),[R,o.account]);return f.useEffect((function(){var e=m.parseQuery(location.search).taskId;S(e),C.load("?label_task_id="+e)}),[]),f.default.createElement("div",{className:"animated fadeIn"},f.default.createElement(s.PageHeader,{title:"成员管理",onBack:function(){return r.goBack()}}),!!z&&f.default.createElement("div",{style:{paddingTop:20}},f.default.createElement("div",{style:{padding:"0 0 20px 10px"}},f.default.createElement(s.Button,{icon:"plus",type:"primary",onClick:function(){return _(!0)}},"添加")),f.default.createElement(s.Table,a({},A,{scroll:{x:800,y:550},pagination:{pageSize:10},loading:C.isLoading}))),!z&&f.default.createElement("div",{style:{paddingTop:20}},f.default.createElement(s.Empty,{description:"暂无权限"})),f.default.createElement(s.Modal,{title:"添加成员",onOk:function(){var e=n.current;e.validateFields((function(t,n){if(!t){var a=n.role,r=n.accounts,l={role:a,label_task_id:x,user_login_name_list:r.map((function(e){return e.split("-")[1]}))};u.http.post({data:l,successMsg:"添加成功",url:"/t-apis/admin/labeltask/users"}).then((function(t){200===t.status&&(e.resetFields(),C.load("?label_task_id="+x),_(!1))}))}}))},visible:b,onCancel:function(){return _(!1)}},f.default.createElement(v,{ref:n,formItems:N})),f.default.createElement(s.Modal,{title:"更新权限",onOk:function(){var e=t.current;e.validateFields((function(t,n){if(!t){var a={role:n.role,label_task_id:x,user_login_name:O};u.http.put({data:a,successMsg:"更新成功",url:"/t-apis/admin/labeltask/users"}).then((function(t){200===t.status&&(e.resetFields(),j(!1),C.load("?label_task_id="+x))}))}}))},visible:E,onCancel:function(){return j(!1)}},f.default.createElement(h,{ref:t,formItems:L})))}},909:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(31);t.DIC={task:{role:[{value:0,label:"无权限"},{value:1,label:"仅查看"},{value:2,label:"可标注"},{value:3,label:"可使用（管理员）"}],status:[{value:0,label:"初始化中"},{value:1,label:"数据同步完成"},{value:2,label:"标注中"},{value:3,label:"标注完成"}]}};var r=a.generateDic(t.DIC),l=r.findDicCN,i=r.findDic;t.findDicCN=l,t.findDic=i},910:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),l=n(48),i=n(911);t.Label=function(){return r.default.createElement("div",{style:{height:"100%",overflowY:"scroll"}},r.default.createElement(l.Route,{path:"/label/working",component:i.Working}))}},911:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),l=n(52),i=n(95),o=a(n(0)),u=n(48),s=n(18),c=n(912),f=n(913),d=n(914),p=n(72),m=n(117),g=n(81),h=s.Tabs.TabPane;t.Working=function(e){var t=e.location,n=u.useHistory(),a=p.useStore(),v=a.LabelImg,y=a.User,b=o.useState(""),_=b[0],k=b[1],E=l.useList({listUrl:"/t-apis/admin/labeltask/users"}),j=E[0],w=E[1],O=l.useFetch({url:"/t-apis/admin/labeltask/detail"}),M=O[0],T=O[1],x=function(e){var a=t.pathname,r=t.search,l=m.parseQuery(r),i=l.name,o=l.taskId,u=l.template;v.setselectedEntryFile(null),n.replace(a+"?taskId="+o+"&name="+i+"&type="+e+"&template="+u)},S=function(){var e=m.parseQuery(t.search).taskId;n.push("/task/roles?taskId="+e)},I=function(){r.http.post({data:{label_task_id:_},successMsg:"变更成功",url:"/t-apis/admin/labeltask/sync_src_data"})},R=function(){r.http.post({data:{label_task_id:_},successMsg:"数据集生成中...",url:"/t-apis/admin/labeltask/generate_dataset"})},C=o.useMemo((function(){var e=m.parseQuery(t.search).name;return decodeURIComponent(e||"")}),[]),P=o.useMemo((function(){return m.parseQuery(t.search).type||"all"}),[t]),A=o.useMemo((function(){var e=M.data_total,t=M.labeld_total;return{total:e||0,finished:t||0,undone:(e||0)-(t||0)}}),[M]),L=i.useComputed((function(){return!(!j.find((function(e){return e.user_login_name===y.account.login_name}))||y.taskRole===g.ETaskRole.noRole)}),[j,y.account,y.taskRole]),N=i.useComputed((function(){var e=j.find((function(e){return e.user_login_name===y.account.login_name}));return!!e&&e.role===g.ETaskRole.use}),[j,y.account]);return o.useEffect((function(){var e=j.find((function(e){return e.user_login_name===y.account.login_name}));if(!e)return y.setRole(g.ETaskRole.noRole);y.setRole(e.role)}),[j]),o.useEffect((function(){var e=m.parseQuery(t.search).taskId,n="?label_task_id="+e;k(e),T.load(n),w.load(n)}),[]),i.useObserver((function(){return o.default.createElement("div",{className:"animated fadeIn p-label-img-tag"},o.default.createElement(s.PageHeader,{title:C,onBack:function(){return n.goBack()},subTitle:N?o.default.createElement("div",{style:{paddingLeft:20}},o.default.createElement(s.Tooltip,{title:"成员管理"},o.default.createElement(s.Button,{size:"small",type:"primary",icon:"team",shape:"circle",style:{marginRight:8},onClick:S})),o.default.createElement(s.Tooltip,{title:M.status>0?"标注任务同步源数据变更":"标注任务同步源数据变更（但数据未就绪）"},o.default.createElement(s.Button,{ghost:!0,size:"small",type:"primary",icon:"retweet",shape:"circle",onClick:I,style:{marginRight:8},disabled:!(M.status>0)})),o.default.createElement(s.Tooltip,{title:0===M.labels_file_status||3===M.labels_file_status?"生成数据集":"生成数据集（数据集正在导出或已存在）"},o.default.createElement(s.Button,{ghost:!0,size:"small",type:"primary",icon:"arrow-down",shape:"circle",style:{marginRight:8},onClick:R,disabled:!(0===M.labels_file_status||3===M.labels_file_status)}))):o.default.createElement("div",null)}),!w.isLoading&&L&&o.default.createElement(s.Tabs,{onChange:x,activeKey:P},o.default.createElement(h,{key:"all",tab:"全部（"+A.total+"）"},"all"===P&&o.default.createElement(c.All,{taskId:_})),o.default.createElement(h,{key:"finished",tab:"已完成（"+A.finished+"）",disabled:y.taskRole===g.ETaskRole.read},"finished"===P&&o.default.createElement(d.Finished,{taskId:_})),o.default.createElement(h,{key:"undone",disabled:y.taskRole===g.ETaskRole.read,tab:o.default.createElement(s.Badge,{count:A.undone,style:{right:-13}},"待标注")},"undone"===P&&o.default.createElement(f.Undone,{taskId:_,onChange:function(){return T.load("?label_task_id="+_)}}))),!w.isLoading&&!L&&o.default.createElement("div",{style:{paddingTop:20}},o.default.createElement(s.Empty,{description:"暂无权限"})),w.isLoading&&o.default.createElement("div",{style:{paddingTop:20}},o.default.createElement(s.Spin,{size:"large"})))}))}},912:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),l=n(31),i=n(52),o=n(36),u=a(n(0)),s=n(18),c=n(72),f=n(81),d=n(117),p=n(427);t.All=function(e){var t=e.taskId,n=r.useHistory(),a=c.useStore(),m=a.LabelImg,g=a.User,h=u.useState(""),v=h[0],y=h[1],b=u.useState(0),_=b[0],k=b[1],E=i.useFetch({url:"/t-apis/admin/labeltask/get_data"}),j=E[0],w=E[1],O=u.useRef(null),M=function(e){void 0===e&&(e=1),w.load({params:{page_num:e,data_type:"all",page_size:12,label_task_id:t}})},T=function(){try{var e=O.current.offsetWidth;k((e-90)/4)}catch(e){}},x=function(e){var t=!e.values||Array.isArray(e.values)&&0===e.values.length;if(g.taskRole===f.ETaskRole.read||g.taskRole===f.ETaskRole.noRole)return s.notification.info({message:"提示",description:"暂无权限，请联系任务创建者"});if(e.current_lock_user&&e.current_lock_user!==g.account.login_name)return s.notification.info({message:"提示",description:"正在被标注，请稍等"});var a=n.location,r=a.pathname,i=a.search,o=d.parseQuery(i),u=o.taskId,c=o.name,p=o.template;m.setselectedEntryFile(e);var h=function(){return n.replace(r+"?taskId="+u+"&name="+c+"&type="+(t?"undone":"finished")+"&template="+p)};t?(s.message.info("进入中..."),l.http.post({data:{label_task_id:u,data_id_list:[e.id]},url:"/t-apis/admin/labeltask/lock_data"}).then((function(e){200===e.status&&h()}))):h()};return u.useEffect((function(){setTimeout(T,100),window.addEventListener("resize",T)}),[]),u.useEffect((function(){var e=d.parseQuery(n.location.search).template;M(),y(e)}),[]),u.default.createElement("div",{ref:O,style:{paddingTop:20}},u.default.createElement(s.Spin,{size:"large",spinning:w.isLoading},u.default.createElement(s.Row,{gutter:[30,30]},(j.results||[]).map((function(e,t){return u.default.createElement(s.Col,{key:t,span:6},u.default.createElement(s.Badge,{count:u.default.createElement("div",null,(!e.values||Array.isArray(e.values)&&0===e.values.length)&&u.default.createElement(s.Tooltip,{title:"待标注"},u.default.createElement(s.Icon,{type:"info-circle",style:{color:"#f5222d"}})),!!e.current_lock_user&&e.current_lock_user!==g.account.login_name&&u.default.createElement(s.Tooltip,{title:"正在被标注，请稍等"},u.default.createElement(s.Icon,{type:"user",style:{color:"#f5222d",marginLeft:5}}))),style:{right:5}},("img-tag"===v||"detection-tag"===v)&&u.default.createElement("div",{onClick:function(){return x(e)}},u.default.createElement(s.Card,{hoverable:!0,cover:u.default.createElement(o.ImgPreview,{height:150,width:_,src:e.file_url}),bodyStyle:{padding:0}})),"voice"===v&&u.default.createElement(p.TaskItem,{desc:"",showAction:!1,onClick:function(){return x(e)},title:e.file_url.split("/")[e.file_url.split("/").length-1]}),"txt"===v&&u.default.createElement(p.TaskItem,{desc:"",showAction:!1,onClick:function(){return x(e)},title:e.content})))}))),!!j.pagination&&u.default.createElement("div",{style:{marginTop:50,width:"100%",display:"flex",justifyContent:"center"}},u.default.createElement(s.Pagination,{simple:!0,defaultCurrent:1,pageSize:12,onChange:M,total:j.pagination.total}))))}},913:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function i(e){try{u(a.next(e))}catch(e){l(e)}}function o(e){try{u(a.throw(e))}catch(e){l(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((a=a.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(l){return function(o){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var l=arguments[t],i=0,o=l.length;i<o;i++,r++)a[r]=l[i];return a},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var u=n(18),s=n(48),c=n(31),f=n(52),d=n(36),p=n(95),m=o(n(0)),g=n(72),h=n(81),v=n(117),y=n(136);t.Undone=function(e){var t=e.taskId,o=e.onChange,b=s.useHistory(),_=g.useStore(),k=_.LabelImg,E=_.User,j=m.useState(0),w=j[0],O=j[1],M=m.useRef([]),T=m.useState(""),x=T[0],S=T[1],I=m.useRef(null),R=m.useState(null),C=R[0],P=R[1],A=m.useRef([]),L=f.useFetch({url:"/t-apis/admin/labeltask/get_data",initVal:{pagination:{total:1,page_num:1,page_size:9},results:[]}}),N=L[0],z=L[1],F=function(e){P(e),I.current=e},D=function(e,t,n){var a=M.current.find((function(t){return t.file_url===e||t.id===e}))||Q.find((function(t){return t.file_url===e||t.id===e}));a&&F(a),n()},U=function(e,n){B().then((function(a){if(a){var i,o=N.pagination.page_num,u="pre"===e?o-1:o+1,s=k.selectedEntryFile;V(u),n&&n(),1===u&&s&&(i=[s.id],r(void 0,void 0,void 0,(function(){return l(this,(function(e){return!i||Array.isArray(i)&&0===i.length?[2,!0]:[2,c.http.post({data:{data_id_list:i,label_task_id:t},url:"/t-apis/admin/labeltask/lock_data"}).then((function(e){return 200===e.status}))]}))})))}}))},V=function(e){void 0===e&&(e=1),z.load({params:{page_num:e,page_size:9,label_task_id:t,data_type:"un_label"}}).then((function(t){var n=t.results[0];(n&&!I.current||e>1)&&F(n),M.current=[]}))},B=function(){return r(void 0,void 0,void 0,(function(){var e;return l(this,(function(n){return 0===(e=i(M.current,A.current,[k.selectedEntryFile||{}]).map((function(e){return e.id})).filter((function(e){return!!e}))).length?[2,!0]:[2,c.http.post({data:{data_id_list:e,label_task_id:t},url:"/t-apis/admin/labeltask/release_lock"}).then((function(e){return 200===e.status}))]}))}))},H=function(e){var t=e.values,n=e.data_id,r=i(M.current),l="img-tag"===x,s=a(a({},C),{values:t}),c=M.current.findIndex((function(e){return e.id===n}));if(-1!==c?r.splice(c,1,s):r=i(r,[s]),l){var f=Q.findIndex((function(e){return e.id===C.id})),d=Q[f+1];P(d||null),1!==Q.length||N.pagination.page_num*N.pagination.page_size>=N.pagination.total?1===Q.length&&N.pagination.page_num*N.pagination.page_size>=N.pagination.total&&u.notification.success({message:"提示",description:"标注完成啦～"}):U("next")}else F(s);M.current=r,o&&o()},Q=p.useComputed((function(){var e="img-tag"===x,t=N.pagination.page_num,n=k.selectedEntryFile,a=(N.results||[]).filter((function(e){return e.id!==(n||{}).id}));return e&&(a=a.filter((function(e){return!M.current.find((function(t){return t.id===e.id}))}))),1===t&&n&&(a=i([n],a)),a}),[N,k.selectedEntryFile,M.current,x]);return m.useEffect((function(){A.current=N.results||[]}),[N]),m.useEffect((function(){var e=k.selectedEntryFile,t=v.parseQuery(b.location.search).template;return S(t),e&&F(e),V(),function(){B()}}),[]),m.useEffect((function(){O(document.body.clientHeight)}),[]),p.useObserver((function(){return m.default.createElement("div",{style:{paddingTop:20}},m.default.createElement(d.Imglist,{imgWdith:150,imgHeight:120,onSelect:D,onPageChange:U,value:(C||{}).file_url||(C||{}).id,list:Q.map((function(e){return e.file_url||e.id})),toolTips:Q.map((function(e){return e.content||e.file_url})),showPre:N.pagination.page_num>1,showNext:!(N.pagination.page_num*N.pagination.page_size>=N.pagination.total),defaultImg:"img-tag"!==x&&"detection-tag"!==x?n(195).default:""}),m.default.createElement("div",{style:{marginTop:10}},!!C&&"img-tag"===x&&m.default.createElement(y.MyImgLabelTag,{type:"single",taskId:t,file:C,onChange:H,src:C.file_url,height:w-440,canAction:E.taskRole>h.ETaskRole.read,defaultSelected:C.values&&C.values[0]?[C.values[0].label]:[]}),!!C&&"detection-tag"===x&&m.default.createElement(y.MyImgDetectTag,{type:"single",taskId:t,file:C,src:C.file_url,onChange:H,height:w-500,canAction:E.taskRole>h.ETaskRole.read,defaultValues:C.values?C.values.map((function(e,t){return{id:t,x:e.points[0],y:e.points[1],w:e.points[2],h:e.points[3],labels:e.label.split(",")}})):[]}),!!C&&"voice"===x&&m.default.createElement(y.MyVoiceLabelText,{taskId:t,file:C,src:C.file_url,onChange:H,canAction:E.taskRole>h.ETaskRole.read,defaultValues:C.values?C.values.map((function(e){return{label:e.label,end:Number(e["end-time"]),start:Number(e["start-time"])}})):[]}),!!C&&"txt"===x&&m.default.createElement(y.MyTxtLabelTag,{taskId:t,file:C,onChange:H,canAction:E.taskRole>h.ETaskRole.read,defaultValues:C.values||[],params:(C.content||"").split("\n")})))}))}},914:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function i(e){try{u(a.next(e))}catch(e){l(e)}}function o(e){try{u(a.throw(e))}catch(e){l(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((a=a.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(l){return function(o){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var l=arguments[t],i=0,o=l.length;i<o;i++,r++)a[r]=l[i];return a},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var u=n(18),s=n(48),c=n(31),f=n(52),d=n(36),p=n(95),m=o(n(0)),g=n(72),h=n(81),v=n(117),y=n(136);n(915),t.Finished=function(e){var t=e.taskId,o=s.useHistory(),b=g.useStore(),_=b.LabelImg,k=b.User,E=m.useState(0),j=E[0],w=E[1],O=m.useRef([]),M=m.useState(""),T=M[0],x=M[1],S=m.useRef(null),I=m.useState(null),R=I[0],C=I[1],P=f.useFetch({url:"/t-apis/admin/labeltask/get_data",initVal:{pagination:{total:1,page_num:1,page_size:10},results:[]}}),A=P[0],L=P[1],N=function(e){C(e),S.current=e},z=function(e){void 0===e&&(e=1),L.load({params:{page_num:e,page_size:10,label_task_id:t,data_type:"labeled"}}).then((function(t){var n=t.results[0];(n&&!S.current||e>1)&&D([n.id]).then((function(){N(n)})),O.current=[]}))},F=function(e,t){U([S.current.id]).then((function(n){if(n){var a=A.pagination.page_num;z("pre"===e?a-1:a+1),t()}}))},D=function(e){return r(void 0,void 0,void 0,(function(){return l(this,(function(n){return!e||Array.isArray(e)&&0===e.length?[2,!0]:(u.message.info("初始化中..."),[2,c.http.post({data:{data_id_list:e,label_task_id:t},url:"/t-apis/admin/labeltask/lock_data"}).then((function(e){return 200===e.status}))])}))}))},U=function(e){return r(void 0,void 0,void 0,(function(){return l(this,(function(n){return!e||Array.isArray(e)&&0===e.length?[2,!0]:[2,c.http.post({data:{data_id_list:e,label_task_id:t},url:"/t-apis/admin/labeltask/release_lock"}).then((function(e){return 200===e.status}))]}))}))},V=function(e,t,n){var a=i(O.current).find((function(t){return t.file_url===e||t.id===e}))||H.find((function(t){return t.file_url===e||t.id===e}));R&&U([R.id]),D([a.id]).then((function(e){e&&(n(),N(a))}))},B=function(e){var t=e.values,n=e.data_id,r=i(O.current),l=a(a({},R),{values:t}),o=r.findIndex((function(e){return e.id===n}));-1!==o?r.splice(o,1,l):r=i(r,[l]),O.current=r},H=p.useComputed((function(){var e=A.pagination.page_num,t=_.selectedEntryFile,n=(A.results||[]).filter((function(e){return e.id!==(t||{}).id}));return 1===e&&t&&(n=i([t],n)),n}),[A,_.selectedEntryFile]);return m.useEffect((function(){var e=_.selectedEntryFile,t=v.parseQuery(o.location.search).template;return x(t),e?D([e.id]).then((function(){N(e),z()})):z(),function(){S.current&&U([S.current.id])}}),[]),m.useEffect((function(){w(document.body.clientHeight)}),[]),p.useObserver((function(){return m.default.createElement("div",{className:"p-working-finished"},m.default.createElement(d.Imglist,{imgWdith:150,imgHeight:120,onSelect:V,onPageChange:F,value:(R||{}).file_url||(R||{}).id,list:H.map((function(e){return e.file_url||e.id})),toolTips:H.map((function(e){return e.content||e.file_url})),showPre:A.pagination.page_num>1,showNext:!(A.pagination.page_num*A.pagination.page_size>=A.pagination.total),defaultImg:"img-tag"!==T&&"detection-tag"!==T?n(195).default:""}),m.default.createElement("div",{className:"label-block"},!!R&&"img-tag"===T&&j&&m.default.createElement(y.MyImgLabelTag,{type:"single",taskId:t,file:R,src:R.file_url,onChange:B,height:j-440,canAction:k.taskRole>h.ETaskRole.read,defaultSelected:R.values&&R.values[0]?[R.values[0].label]:[]}),!!R&&"detection-tag"===T&&m.default.createElement(y.MyImgDetectTag,{type:"single",taskId:t,file:R,src:R.file_url,onChange:B,height:j-500,canAction:k.taskRole>h.ETaskRole.read,defaultValues:R.values?R.values.map((function(e,t){return{id:t,x:e.points[0],y:e.points[1],w:e.points[2],h:e.points[3],labels:e.label.split(",")}})):[]}),!!R&&"voice"===T&&m.default.createElement(y.MyVoiceLabelText,{taskId:t,file:R,src:R.file_url,canAction:k.taskRole>h.ETaskRole.read,onChange:B,defaultValues:R.values?R.values.map((function(e){return{label:e.label,end:Number(e["end-time"]),start:Number(e["start-time"])}})):[]}),!!R&&"txt"===T&&R.values.length>0&&m.default.createElement(y.MyTxtLabelTag,{taskId:t,file:R,onChange:B,canAction:k.taskRole>h.ETaskRole.read,defaultValues:R.values||[],params:(R.content||"").split("\n")})))}))}},915:function(e,t,n){var a=n(27),r=n(916);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},916:function(e,t,n){(t=n(28)(!1)).push([e.i,".p-working-finished {\n  padding-top: 20px;\n}\n.p-working-finished .label-block {\n  margin-top: 10px;\n}\n",""]),e.exports=t},917:function(e,t,n){var a=n(27),r=n(918);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},i=(a(e.i,r,l),r.locals?r.locals:{});e.exports=i},918:function(e,t,n){(t=n(28)(!1)).push([e.i,"iframe {\n  border: none;\n}\n.ant-card {\n  overflow: hidden;\n}\n.ant-tag {\n  cursor: pointer !important;\n}\n.ant-card-meta-title,\n.ant-card-meta-title div,\n.ant-checkbox-wrapper,\n.ant-card-meta-description {\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.ant-badge {\n  width: 100%;\n}\n",""]),e.exports=t}});