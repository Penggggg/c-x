!function(e){function t(t){for(var r,i,o=t[0],s=t[1],u=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);f.length;)f.shift()();return l.push.apply(l,u||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(l.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},l=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/build";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=s;l.push([560,1]),n()}({1181:function(e,t){},1183:function(e,t){},1196:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(l<3?a(i):l>3?a(t,n,i):a(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var l=n(43),i=(n(242),n(23)),o=function(){function e(){this.role=void 0}return e.prototype.setRole=function(e){var t=this;return i.http.post({data:{role:e},url:"/apis/common/role"}).then((function(n){if(200===n.status)return t.role=e,e}))},e.prototype.initRole=function(){var e=this;return i.http.get({url:"/apis/common/role"}).then((function(t){var n=t.status,r=t.data;if(200===n)return null!==r&&(e.role=r),r}))},r([l.observable,a("design:type",Object)],e.prototype,"role",void 0),r([l.action,a("design:type",Function),a("design:paramtypes",[Number]),a("design:returntype",void 0)],e.prototype,"setRole",null),r([l.action,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],e.prototype,"initRole",null),e}();t.default=new o},1197:function(e,t,n){var r=n(50),a=n(1198);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1198:function(e,t,n){(t=n(51)(!1)).push([e.i,".con-app-header {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.con-app-header .content-block {\n  display: flex;\n  align-items: center;\n}\n.con-app-header .content-block .logo-block {\n  display: flex;\n  align-items: flex-end;\n}\n.con-app-header .content-block .logo-block .logo {\n  height: 25px;\n  width: 80px;\n  margin-right: 10px;\n}\n.con-app-header .content-block .logo-block .title {\n  color: #fff;\n  font-size: 18px;\n  line-height: 18px;\n  display: inline-block;\n  letter-spacing: 0.05em;\n  margin-bottom: 2px;\n}\n.con-app-header .content-block .menu-block {\n  margin-left: 20px;\n}\n",""]),e.exports=t},1199:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(19);t.AppBreadcrumb=function(){var e=a.useState([]),t=e[0],n=e[1],r={dataset:{label:"数据集",to:"/base/dataset/list"},algorithm:{label:"算法管理",to:"/base/algorithm/list"},train:{label:"训练管理",to:"/base/train/list"},deploy:{label:"部署管理",to:"/base/deploy/list"},model:{label:"模型管理"},swagger:{label:"在线文档"}};return a.useEffect((function(){setInterval((function(){return function(){var e=[];window.location.pathname.split("/").filter((function(e){return!!e})).map((function(t){r[t]&&e.push(r[t])}));var a=e.some((function(e,n){return e!==t[n]}));if(e.length!==t.length||a)return n(e)}()}),500)}),[]),a.default.createElement(i.Breadcrumb,null,a.default.createElement(i.Breadcrumb.Item,{href:""},a.default.createElement(i.Icon,{type:"home"})),t.map((function(e,n){return a.default.createElement(i.Breadcrumb.Item,{key:n},n!==t.length-1&&e.to?a.default.createElement(l.Link,{to:e.to},e.label):e.label)})))}},1200:function(e,t,n){var r=n(50),a=n(1201);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1201:function(e,t,n){(t=n(51)(!1)).push([e.i,"",""]),e.exports=t},1202:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),l=n(536),i=r(n(0)),o=n(31),s=n(241),u=n(242),c=n(240);n(1203);var d=a.Card.Meta,f=a.Layout.Content;t.Home=function(e){var t=o.useHistory(),n=s.useStore().UserRole,r=i.useState(!1),m=r[0],p=r[1],h=i.useState([{title:"普通用户",description:"快速对接算法服务",img:"/dist/img/people4.png"},{title:"算法研究员",description:"管理你的算法服务",img:"/dist/img/bear.png"}])[0],v=function(e){null===e&&p(!0),e===u.EUserRole.adm&&t.replace("/base/dataset/list"),e===u.EUserRole.normal&&t.replace("/user/panel")};return i.useEffect((function(){n.initRole().then((function(e){return v(e)}))}),[]),l.useObserver((function(){return i.default.createElement(a.Layout,{className:"p-home",style:{height:"100vh"}},i.default.createElement(c.AppHeader,{showUser:!1,showUserAlgorithm:!1}),i.default.createElement(a.Layout,{style:{padding:"0 24px 24px"}},i.default.createElement(f,{style:{margin:0,padding:24,background:"#fff"}},i.default.createElement("div",{className:"my-content"},!m&&i.default.createElement("div",{className:"cards-block"},i.default.createElement(a.Spin,{size:"large",style:{marginTop:100}})),!!m&&i.default.createElement("div",{className:"animated jackInTheBox"},i.default.createElement("div",{className:"content-title"},"选择你的角色"),i.default.createElement("div",{className:"cards-block"},h.map((function(e,t){return i.default.createElement("div",{key:t,onClick:function(e){return r=t,void n.setRole(r).then((function(){return v(r)}));var r}},i.default.createElement(a.Card,{hoverable:!0,cover:i.default.createElement("img",{src:e.img,style:{width:"100%",height:180}}),style:{width:300,height:320,marginRight:0===t?90:0}},i.default.createElement(d,{title:e.title,description:e.description})))}))))))))}))}},1203:function(e,t,n){var r=n(50),a=n(1204);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1204:function(e,t,n){(t=n(51)(!1)).push([e.i,".p-home .my-content {\n  height: 100%;\n}\n.p-home .my-content .content-title {\n  color: #333;\n  font-size: 22px;\n  margin: 50px 0 50px;\n  text-align: center;\n  letter-spacing: 0.05em;\n}\n.p-home .my-content .cards-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n",""]),e.exports=t},1205:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(19),i=n(31),o=n(240),s=n(1206),u=n(1209),c=l.Layout.Content;t.User=function(e){var t=e.location,n=(e.match,a.useState("")),r=n[0],d=n[1];return a.useEffect((function(){var e=t.pathname;e.startsWith("/user/model")&&d(e.split("/")[3])})),a.default.createElement(l.Layout,{className:"p-base",style:{height:"100vh"}},a.default.createElement(o.AppHeader,{showUser:!0,showUserAlgorithm:!0}),a.default.createElement(l.Layout,null,a.default.createElement(l.Layout,{style:{padding:"0 24px 24px"}},a.default.createElement(c,{style:{margin:0,padding:24,background:"#fff"}},a.default.createElement("div",{style:{height:"100%",background:"#fff"}},a.default.createElement(i.Route,{path:"/user/panel",component:s.Panel}),a.default.createElement(i.Route,{key:r,component:u.Model,path:"/user/model/:aid/:index"}))))))}},1206:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),l=r(n(0)),i=n(31),o=n(30),s=n(161);n(1207),t.Panel=function(){var e=i.useHistory(),t=o.useList({listUrl:"/t-apis/public/algorithm_info"}),n=t[0],r=t[1],u=function(e,t){var n=e.algorithm_name,r=s.findAlgorithmCover(n);return l.default.createElement("div",{className:"card-container"},l.default.createElement("img",{src:r||"/dist/img/ai-"+t%10+".jpg"}),l.default.createElement("div",{className:"label"},e.model_num,"个模型"))};return l.useEffect((function(){r.load("")}),[]),l.default.createElement("div",{className:"p-user-panel"},r.isLoading&&l.default.createElement("div",{className:"spin"},l.default.createElement(a.Spin,{size:"large",spinning:!0})),!r.isLoading&&l.default.createElement("div",{className:"animated fadeIn"},l.default.createElement("div",{className:"list-block"},n.map((function(t,r){return l.default.createElement("div",{key:r,className:"item",onClick:function(n){return function(t){e.push("/user/model/"+t.id+"/"+encodeURIComponent(t.algorithm_name)+"/my")}(t)}},l.default.createElement(a.Card,{hoverable:!0,cover:u(t,r),style:{width:300,height:290,marginRight:r!==n.length-1?60:0}},l.default.createElement(a.Card.Meta,{title:t.algorithm_name,description:t.description})))})))))}},1207:function(e,t,n){var r=n(50),a=n(1208);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1208:function(e,t,n){(t=n(51)(!1)).push([e.i,".p-user-panel .spin {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 100px;\n}\n.p-user-panel .list-block {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 20px 0px 0 50px;\n}\n.p-user-panel .list-block .item {\n  margin-top: 40px;\n}\n.p-user-panel .list-block .item .card-container {\n  width: 100%;\n  height: 180px;\n  position: relative;\n}\n.p-user-panel .list-block .item .card-container img {\n  width: 100%;\n  height: 100%;\n}\n.p-user-panel .list-block .item .card-container .label {\n  top: 0;\n  right: 0;\n  color: #fff;\n  font-size: 12px;\n  position: absolute;\n  padding: 5px 10px;\n  letter-spacing: 0.05em;\n  background: rgba(0, 0, 0, 0.65);\n}\n.ant-card-meta-description {\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  text-overflow: ellipsis;\n  -webkit-box-orient: vertical;\n}\n",""]),e.exports=t},1209:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),l=n(30),i=r(n(0)),o=n(31),s=n(1210),u=n(1213),c=n(1217),d=n(1222),f=n(161);n(1224);var m=a.Menu.SubMenu,p=a.Layout.Sider,h=a.Layout.Content;t.Model=function(e){var t=e.match,n=e.location,r=o.useHistory(),v=i.useState(""),y=v[0],g=v[1],_=i.useState(""),b=_[0],E=_[1],j=i.useState([]),k=j[0],w=j[1],M=l.useList({listUrl:"/t-apis/algorithm/detail"}),x=M[0],O=M[1],C=i.useMemo((function(){return"/user/model/"+y+"/"+b}),[y,b]),S=i.useMemo((function(){return[{title:"模型中心",icon:"bar-chart",items:[{title:"我的模型",url:C+"/my"},{title:"训练模型",url:C+"/train"},{title:"部署模型",url:C+"/deploy"}]}]}),[C]);return i.useEffect((function(){!function(){for(var e=n.pathname,t=0;t<S.length;t++){var r=S[t].items;if(!r)return;for(var a=0;a<r.length;a++)if(r[a].url.includes(e)){var l=t+"-"+a;if(l===k[0])return;w([l])}}}()})),i.useEffect((function(){!function(){var e=t.params,n=e.aid,r=e.index;g(n),E(r),O.load("?algorithm_id="+n)}()}),[]),i.default.createElement("div",{className:"user-model animated fadeIn"},i.default.createElement("div",{className:"back-icon",onClick:function(){return r.replace("/user/panel")}},i.default.createElement(a.Icon,{type:"arrow-left"})),i.default.createElement("div",{className:"top-block"},i.default.createElement("img",{src:f.findAlgorithmCover(b)||"/dist/img/ai-"+b+".jpg"}),i.default.createElement("div",{className:"text-block"},i.default.createElement("div",{className:"title"},x.algorithm_name),i.default.createElement("p",{className:"content"},x.description))),i.default.createElement(a.Layout,{className:"content-block"},i.default.createElement(p,{width:200},i.default.createElement(a.Menu,{mode:"inline",selectedKeys:k,onClick:function(e){return w([e.key])},style:{height:"100%",borderRight:0},defaultOpenKeys:S.map((function(e){return e.title}))},S.map((function(e,t){return e.items?i.default.createElement(m,{key:e.title,title:i.default.createElement("span",null,i.default.createElement(a.Icon,{type:e.icon})," ",e.title)},e.items.map((function(e,n){return i.default.createElement(a.Menu.Item,{key:t+"-"+n},i.default.createElement(o.Link,{to:e.url},e.title))}))):i.default.createElement(a.Menu.Item,{key:t},i.default.createElement(o.Link,{to:e.url},i.default.createElement(a.Icon,{type:e.icon}),e.title))})))),i.default.createElement(h,{style:{borderLeft:"15px solid #fafafa"}},i.default.createElement(o.Route,{path:C+"/my",render:function(){return i.default.createElement(s.My,{aid:y,aIndex:b})}}),i.default.createElement(o.Route,{path:C+"/deploied",component:d.MyDeployList}),i.default.createElement(o.Route,{path:C+"/train",render:function(){return i.default.createElement(u.Train,{aid:y,aIndex:b})}}),i.default.createElement(o.Route,{path:C+"/deploy",component:c.Deploy}))))}},1210:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(19),i=n(31),o=a(n(0)),s=n(23),u=n(23),c=n(30),d=n(80),f=n(150);n(1211),t.My=function(e){var t=i.useHistory(),n=o.useState(""),a=n[0],m=n[1],p=c.useList({listUrl:"/t-apis/public/my_models"}),h=p[0],v=p[1],y=function(){v.load("?algorithm_id="+a)},g=function(e){u.http.get({params:{model_version_id:e.version_id},url:"/t-apis/deploy/offline_tar"}).then((function(e){var t=e.status,n=e.data;200===t&&n&&(window.location.href=n)}))},_=o.useMemo((function(){return s.createColumns(h,h[0],{version_name:"版本",state:{title:"状态",render:function(e){return o.default.createElement("a",null,d.findDicCN("model.version_state",e.state))}},c:{title:"场景",render:function(e){var t=e.src_model_info,n=t.model_name,r=t.description,a=t.scenarios_info;return o.default.createElement(l.Tooltip,{title:"所属模型："+n+"。详情："+r},o.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},(a||{}).name))}},create_time:{title:"创建时间",render:function(e){return o.default.createElement("span",null,f.transferTime2CN(e.create_time))}},evaluate:{title:"结果",render:function(e){return o.default.createElement(l.Tooltip,{title:e.evaluate},o.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},e.evaluate))}}},{customs:[{render:function(n){return n.state>=2?o.default.createElement("a",{onClick:function(r){return function(n){var r=e.aid,a=e.aIndex;t.push("/user/model/"+r+"/"+a+"/deploy?v="+n.version_id)}(n)}},"部署"):""}},{render:function(n){return o.default.createElement("a",{onClick:function(r){return function(n){var r=n.version_id;if(r){var a=e.aid,l=e.aIndex,i="/t-apis/public/deploys?model_version_id="+r;t.push("/user/model/"+a+"/"+l+"/deploied?url="+encodeURIComponent(i))}}(n)}},"部署详情")}},{render:function(e){return e.deploy_project_id?o.default.createElement("a",{onClick:function(t){return function(e){var t="test".toLowerCase().includes("prod")?"http://server.research.cvte.cn/projectEnvironment?id":"http://10.22.21.27:8090/projectEnvironment?id=";window.open(""+t+e.deploy_project_id)}(e)}},"服务管理"):""}},{render:function(e){return 2===e.state||4===e.state?o.default.createElement("a",{onClick:function(t){return function(e){if(4===e.state)return g(e);u.http.post({data:{model_version_id:e.version_id},url:"/t-apis/deploy/offline_tar"}).then((function(e){200===e.status&&y()}))}(e)}},"获取离线包"):""}},{render:function(e){return 0===e.state||"0"===e.state||1===e.state||"1"===e.state?o.default.createElement("a",{onClick:function(t){return function(e){var t=e.train_id;l.Modal.confirm({title:"提示",content:"确认停止训练吗？",onOk:function(){u.http.post({data:{train_id:t},url:"/t-apis/train/stop"}).then((function(e){200===e.status&&y()}))}})}(e)}},"停止训练"):""}},{render:function(e){return o.default.createElement("a",{onClick:function(t){return function(e){l.Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){u.http.post({data:{version_id:e.version_id},url:"/t-apis/model/del_version"}).then((function(e){200===e.status&&y()}))}})}(e)}},"删除")}}]})}),[h]);return o.useEffect((function(){m(e.aid),v.load("?algorithm_id="+e.aid)}),[]),o.default.createElement("div",{className:"p-use-model-my animated fadeIn"},o.default.createElement("div",{className:"title"},"我的模型"),o.default.createElement(l.Table,r({},_,{scroll:{x:1600,y:550},pagination:{pageSize:5},loading:v.isLoading,expandedRowRender:function(e){return o.default.createElement("div",null,"【描述】",e.description||"暂无")}})))}},1211:function(e,t,n){var r=n(50),a=n(1212);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1212:function(e,t,n){(t=n(51)(!1)).push([e.i,".p-use-model-my .title {\n  font-size: 16px;\n  padding-left: 20px;\n  margin-bottom: 25px;\n  padding-bottom: 15px;\n  color: rgba(0, 0, 0, 0.85);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n}\n",""]),e.exports=t},1213:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1214)),o=n(31),s=n(23),u=n(19),c=n(30),d=n(62),f=l(n(0)),m=n(161);n(1215);var p=d.MyForm("normal-user-train-form");t.Train=function(e){var t=f.useRef(null),n=o.useHistory(),a=f.useState(""),l=a[0],d=a[1],h=f.useState(""),v=h[0],y=h[1],g=c.useList({listUrl:"/t-apis/scenarios/all"}),_=g[0],b=g[1],E=c.useList({listUrl:"/t-apis/dataset/list"}),j=E[0],k=E[1],w=f.useMemo((function(){var e="test".toLowerCase().includes("prod")?"http://drive.research.cvte.cn/":"http://10.22.21.26:9081/#/dashboard";return[{key:"model_id",label:"模型",type:"cascader",placeholder:"请选择模型",options:_.filter((function(e){return Array.isArray(e.models)&&e.models.length>0})).map((function(e){return{value:e.id,label:e.scenarios,children:e.models.map((function(e){return{value:""+e.id,label:e.model_name}}))}})),rules:[{required:!0,message:"请选择模型"}],extra:l?f.default.createElement("div",{style:{marginBottom:"-5px"}},f.default.createElement(u.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:8}}),l):""},{key:"dataset_manage_id",label:"数据集",type:"select",placeholder:"请选择数据集",options:j.map((function(e){return{value:e.dataset_manage_id,label:e.dataset_name}})),rules:[{required:!0,message:"请选择数据集"}],extra:f.default.createElement("div",{style:{cursor:"pointer"},onClick:function(){return window.open(e)}},f.default.createElement(u.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:8}}),"创建数据集"),popover:v?f.default.createElement(i.default,{width:"400px",height:"500px",url:v}):""},{key:"description",label:"描述",type:"textarea",placeholder:"请填写描述",rules:[]}]}),[j,v,_,l]);return f.useEffect((function(){k.load(""),b.load("?algorithm_id="+e.aid)}),[]),f.default.createElement("div",{className:"p-model-train animated fadeIn"},f.default.createElement("div",null,f.default.createElement("div",{className:"title"},"训练模型"),f.default.createElement("div",{className:"content-block"},f.default.createElement("div",{className:"form-block"},f.default.createElement(p,{ref:t,onChange:function(e){var t=e.dataset_manage_id,n=e.model_id;if(t){var r=j.find((function(e){return e.dataset_manage_id===t}));r&&y(r.info)}else y("");if(n&&n[1])try{var a=_.find((function(e){return e.id===n[0]})).models.find((function(e){return e.id===n[1]}));d(a.description)}catch(e){d("")}},formItems:w}),f.default.createElement("div",{style:{padding:"20px 0 0 30px"}},f.default.createElement(u.Button,{type:"primary",onClick:function(){var a=t.current;a.validateFields((function(t,l){var i=l.model_id;t||s.http.post({data:r(r({},l),{model_id:i[1],scenarios_id:i[0]}),successMsg:"正在排队",url:"/t-apis/public/train_model"}).then((function(t){200===t.status&&(a.resetFields(),n.push("/user/model/"+e.aid+"/"+e.aIndex+"/my"))}))}))}},"确认"))),f.default.createElement("div",{className:"tips-block"},f.default.createElement(u.Alert,{showIcon:!0,type:"info",message:f.default.createElement("div",null,"详细说明",f.default.createElement("a",{target:"blank",style:{fontSize:12,marginLeft:8},href:"http://aidoc.gz.cvte.cn/docs/customer-model-train/customer-model-train-user-train"},"(更多)"))}),f.default.createElement(u.List,{style:{padding:"15px 10px 0"}},f.default.createElement(u.List.Item,null,f.default.createElement(u.List.Item.Meta,{title:"训练模型",description:"通过指定的数据集，可训练出适合不同场景的模型"})),f.default.createElement(u.List.Item,null,f.default.createElement(u.List.Item.Meta,{title:"模型",description:"已有的模型为研究院相关方向研究出来的模型，已经通过实际项目的验证，为稳定可用的「原始模型」"})),f.default.createElement(u.List.Item,null,f.default.createElement(u.List.Item.Meta,{title:"数据集",description:f.default.createElement("div",null,"训练用的数据集，需要您自行上传到",f.default.createElement("a",{href:m.systems.Datasets,target:"blank"},"数据集管理平台"),"，并进行管理，如果上传的数据为未标注数据，需要先进行标注。在",f.default.createElement("a",{href:m.systems.Datasets,target:"blank"},"数据集管理平台"),"中：「组名」即数据集名称，在「data」路径下存储数据集的数据，而「README.json」则用来描述数据集,  如果是您上传的是已标注数据集，需要您手工创建「README.json」文件。",f.default.createElement("a",{href:"http://aidoc.gz.cvte.cn/docs/customer-model-train/customer-model-train-dataset",target:"blank"},"详细说明"))})))))))}},1215:function(e,t,n){var r=n(50),a=n(1216);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1216:function(e,t,n){(t=n(51)(!1)).push([e.i,".p-model-train {\n  padding-top: 0px;\n}\n.p-model-train .title {\n  font-size: 16px;\n  padding-left: 20px;\n  margin-bottom: 25px;\n  padding-bottom: 15px;\n  color: rgba(0, 0, 0, 0.85);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n}\n.p-model-train .title .title-tips {\n  color: #999;\n  font-size: 12px;\n  margin-left: 10px;\n  letter-spacing: 0.02em;\n}\n.p-model-train .content-block {\n  display: flex;\n  align-items: flex-start;\n}\n.p-model-train .content-block .form-block {\n  width: 450px;\n  padding-left: 20px;\n  margin-right: 100px;\n}\n.p-model-train .content-block .tips-block {\n  width: 400px;\n}\n",""]),e.exports=t},1217:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),l=r(n(0)),i=n(1218),o=n(1219);n(1220),t.Deploy=function(e){var t=e.location,n=e.match,r=l.useState(""),s=r[0],u=r[1],c=l.useState(""),d=c[0],f=c[1];return l.useEffect((function(){!function(){var e=n.path,r=t.search;if(u(e.split("/").filter((function(e){return!!e}))[2]),r.startsWith("?")){var a=r.slice(1).split("&"),l=a.findIndex((function(e){return e.startsWith("v=")}));-1!==l&&f(a[l].split("=")[1])}}()}),[]),l.default.createElement("div",{className:"p-model-deploy animated fadeIn"},l.default.createElement("div",{className:"title"},"部署模型"),l.default.createElement("div",{className:"content-block"},l.default.createElement(a.Tabs,{defaultActiveKey:"1"},l.default.createElement(a.Tabs.TabPane,{tab:"在线部署",key:"1"},l.default.createElement(i.DeployOnlineNormal,{aid:s,defaultVersion:d})),l.default.createElement(a.Tabs.TabPane,{tab:"离线部署",key:"2"},l.default.createElement(o.DeployOfflineNormal,{aid:s,defaultVersion:d})))))}},1218:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(80),i=n(23),o=n(19),s=n(30),u=n(62),c=a(n(0)),d=n(161),f=u.MyForm("deploy-online-normal");t.DeployOnlineNormal=function(e){var t=e.aid,n=e.defaultVersion,a=c.useRef(null),u=c.useState({}),m=u[0],p=(u[1],s.useList({listUrl:"/t-apis/project/list"})),h=p[0],v=p[1],y=s.useList({listUrl:"/t-apis/public/my_models"}),g=y[0],_=y[1],b=c.useMemo((function(){var e="test".toLowerCase().includes("prod"),t=Object.keys(h).map((function(e){return{label:e,value:e,children:h[e].map((function(e){return{value:""+e.id,label:l.findDicCN("project.envType",e.env_type)}}))}})),n=e?"http://server.research.cvte.cn":"http://10.22.21.27:8090";return[{key:"project_id",label:"项目",type:"cascader",placeholder:"请选择项目",options:t,rules:[{required:!0,message:"请选择项目"}],extra:c.default.createElement("div",{style:{cursor:"pointer"},onClick:function(){return window.open(n)}},c.default.createElement(o.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:8}}),"创建项目")},{key:"model_version_id",label:"版本",type:"select",placeholder:"请选择版本",options:g.map((function(e){return{value:e.version_id,label:""+e.version_name}})),rules:[{required:!0,message:"请选择版本"}]},{key:"app_name",label:"服务名称",type:"input",placeholder:"请填写服务名称",rules:[{required:!0,message:"请填写服务名称"}]}]}),[h,g]);return c.useEffect((function(){var e=a.current;!!g.find((function(e){return e.version_id===n}))&&e.setFieldsValue({model_version_id:n})}),[g]),c.useEffect((function(){_.load("?algorithm_id="+t)}),[t]),c.useEffect((function(){v.load("")}),[]),c.default.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},c.default.createElement("div",{style:{width:450,paddingLeft:20,marginRight:100}},c.default.createElement(f,{ref:a,formItems:b}),c.default.createElement("div",{style:{marginLeft:50,marginTop:40}},c.default.createElement(o.Button,{type:"primary",onClick:function(){var e=a.current;e.validateFields((function(t,n){var a=n.project_id;t||i.http.post({data:r(r({},n),{replicas:1,env:JSON.stringify(m),project_id:a[1]}),successMsg:"部署成功",url:"/t-apis/deploy/online"}).then((function(t){200===t.status&&e.resetFields()}))}))}},"确定"))),c.default.createElement("div",{style:{width:400}},c.default.createElement(o.Alert,{showIcon:!0,type:"info",message:c.default.createElement("div",null,"详细说明",c.default.createElement("a",{target:"blank",style:{fontSize:12,marginLeft:8},href:"http://aidoc.gz.cvte.cn/docs/customer-model-train/customer-model-train-user-train"},"(更多)"))}),c.default.createElement(o.List,{style:{padding:"15px 10px 0"}},c.default.createElement(o.List.Item,null,c.default.createElement(o.List.Item.Meta,{title:"在线部署",description:c.default.createElement("div",null,"是指通过研究院工程组的",c.default.createElement("a",{href:d.systems.Sys,target:"blank"},"服务管理系统"),"进行算法模型的部署使用。算法服务部署在研究院的服务器集群中，部署完成后，您可以直接调用相应接口使用。")})),c.default.createElement(o.List.Item,null,c.default.createElement(o.List.Item.Meta,{title:"项目",description:c.default.createElement("div",null,"在",c.default.createElement("a",{href:d.systems.Sys,target:"blank"},"服务管理系统"),"创建的项目。 您的算法服务将会部署在自己创建的项目下。")})),c.default.createElement(o.List.Item,null,c.default.createElement(o.List.Item.Meta,{title:"名称",description:"只接受英文字符串，用于访问部署后的模型，生成的「可访问地址」为：http://general-ai.research.cvte.cn:3001/你设置的服务名称"})))))}},1219:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(19),i=n(23),o=n(30),s=n(62),u=a(n(0)),c=s.MyForm("deploy-offline-normal");t.DeployOfflineNormal=function(e){var t=e.aid,n=e.defaultVersion,a=u.useRef(null),s=u.useState({}),d=s[0],f=(s[1],o.useList({listUrl:"/t-apis/public/my_models"})),m=f[0],p=f[1],h=u.useMemo((function(){return[{key:"model_version_id",label:"模型版本",type:"select",placeholder:"请选择模型版本",options:m.map((function(e){return{value:e.version_id,label:e.name+" - "+e.version_name}})),rules:[{required:!0,message:"请选择模型版本"}]},{key:"app_name",label:"名称",type:"input",placeholder:"请填写名称",rules:[{required:!0,message:"请填写名称"}]},{key:"api_address",label:"接口地址",type:"input",placeholder:"请填写接口地址",rules:[{required:!0,message:"请填写接口地址"}]},{key:"description",label:"描述",type:"textarea",placeholder:"请填写描述",rules:[]}]}),[m]);return u.useEffect((function(){var e=a.current;!!m.find((function(e){return e.version_id===n}))&&e.setFieldsValue({model_version_id:n})}),[m]),u.useEffect((function(){p.load("?algorithm_id="+t)}),[t]),u.default.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},u.default.createElement("div",{style:{width:450,paddingLeft:20,marginRight:100}},u.default.createElement(c,{ref:a,formItems:h}),u.default.createElement("div",{style:{marginLeft:50,marginTop:40}},u.default.createElement(l.Button,{type:"primary",onClick:function(){var e=a.current;e.validateFields((function(t,n){t||i.http.post({data:r(r({},n),{env:JSON.stringify(d)}),successMsg:"部署成功",url:"/t-apis/deploy/offline_add"}).then((function(t){200===t.status&&e.resetFields()}))}))}},"确定"))),u.default.createElement("div",{style:{width:400}},u.default.createElement(l.Alert,{showIcon:!0,type:"info",message:u.default.createElement("div",null,"详细说明",u.default.createElement("a",{target:"blank",style:{fontSize:12,marginLeft:8},href:"http://aidoc.gz.cvte.cn/docs/customer-model-train/customer-model-train-user-train"},"(更多)"))}),u.default.createElement(l.List,{style:{padding:"15px 10px 0"}},u.default.createElement(l.List.Item,null,u.default.createElement(l.List.Item.Meta,{title:"离线部署",description:"是指获取训练出来的「模型版本离线包」，部署在自己的「私有服务器」"})),u.default.createElement(l.List.Item,null,u.default.createElement(l.List.Item.Meta,{title:"名称",description:"用于标识「服务」，无特殊用途"})),u.default.createElement(l.List.Item,null,u.default.createElement(l.List.Item.Meta,{title:"接口地址",description:"在本系统在线调试时使用。填写内容为「私有服务器」的内网访问地址，例如 http://私有服务器ip:部署端口。如您现在无法确定私有服务器ip和端口，可以先随便填，等待部署完成后修改即可。当然您也可以使用postman进行调试。"})),u.default.createElement(l.List.Item,null,u.default.createElement(l.List.Item.Meta,{title:"使用流程",description:u.default.createElement("div",null,u.default.createElement("img",{src:"/dist/img/use-example-1.png"}))})))))}},1220:function(e,t,n){var r=n(50),a=n(1221);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1221:function(e,t,n){(t=n(51)(!1)).push([e.i,".p-model-deploy {\n  padding-top: 0px;\n}\n.p-model-deploy .title {\n  font-size: 16px;\n  padding-left: 20px;\n  margin-bottom: 25px;\n  padding-bottom: 15px;\n  color: rgba(0, 0, 0, 0.85);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n}\n.p-model-deploy .content-block {\n  padding: 0 50px;\n}\n",""]),e.exports=t},1222:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(1223),i=n(483);t.MyDeployList=function(e){var t=e.location,n=a.useState(""),r=n[0],o=n[1];return a.useEffect((function(){var e=l.parseQuery(t.search).url;e&&o(e)}),[]),a.default.createElement(i.DeployList,{url:r})}},1223:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuery=function(e){if(!e)return{};try{var t={};return(e.startsWith("?")?e.slice(1):e).split("&").map((function(e){var n,a=e.split("="),l=a[0],i=a[1];t=r(r({},t),((n={})[l]=i,n))})),t}catch(e){return{}}}},1224:function(e,t,n){var r=n(50),a=n(1225);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1225:function(e,t,n){(t=n(51)(!1)).push([e.i,".user-model {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 10px 30px 0px;\n  box-sizing: content-box;\n  position: relative;\n}\n.user-model .back-icon {\n  top: -10px;\n  left: 0px;\n  position: absolute;\n  cursor: pointer;\n}\n.user-model .top-block {\n  display: flex;\n  padding: 15px;\n  align-items: center;\n  background: #fafafa;\n}\n.user-model .top-block img {\n  width: 230px;\n  height: 130px;\n  border-radius: 3px;\n}\n.user-model .top-block .text-block {\n  margin-left: 30px;\n}\n.user-model .top-block .text-block .title {\n  color: #333;\n  font-size: 22px;\n  letter-spacing: 0.03em;\n}\n.user-model .top-block .text-block .content {\n  color: #999;\n  font-size: 12px;\n  margin-top: 20px;\n  padding-right: 30%;\n  line-height: 20px;\n  word-break: keep-all;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  text-overflow: ellipsis;\n  -webkit-box-orient: vertical;\n}\n.user-model .content-block {\n  flex: 1;\n  margin-top: 20px;\n  overflow-y: scroll;\n  background: #fff;\n}\n",""]),e.exports=t},1226:function(e,t,n){var r=n(50),a=n(1227);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var l={insert:"head",singleton:!1},i=(r(e.i,a,l),a.locals?a.locals:{});e.exports=i},1227:function(e,t,n){(t=n(51)(!1)).push([e.i,"iframe {\n  border: none;\n}\n.ant-tag {\n  cursor: pointer !important;\n}\n.ant-checkbox-wrapper {\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n",""]),e.exports=t},150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transferTime2CN=function(e){try{if(!e)return;var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate(),l=t.getHours(),i=t.getMinutes(),o=function(e){return 1===String(e).length?"0"+e:""+e};return o(n)+"-"+o(r)+"-"+o(a)+" "+o(l)+":"+o(i)}catch(e){return console.log("transferTime Error"),""}}},161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="test".toLowerCase().includes("prod");t.algorithmCovers=["/dist/img/bg-图像分类.jpg","/dist/img/bg-物体检测.jpg","/dist/img/bg-图片分割.jpg"],t.systems={Datasets:r?"http://drive.research.cvte.cn/":"http://10.22.21.26:9081/#/dashboard",Sys:r?"http://server.research.cvte.cn":"http://10.22.21.27:8090"},t.findAlgorithmCover=function(e){var n=decodeURIComponent(e);return t.algorithmCovers.find((function(e){return!!function(e,t){for(var n=e.length>t.length?e:t,r=n==e?t:e,a=0;a<r.length;a++)for(var l=0,i=r.length-a;i!=r.length+1;l++,i++){var o=r.substring(l,i);if(-1!=n.indexOf(o))return o}return""}(e,n)}))}},240:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(536),o=n(19),s=n(23),u=n(241),c=n(242),d=n(30);n(1197);var f={showUser:!0,showUserAlgorithm:!0},m=o.Layout.Header,p=o.Menu.SubMenu;t.AppHeader=function(e){var t=void 0===e?f:e,n=t.showUser,r=t.showUserAlgorithm,h=l.useHistory(),v=u.useStore().UserRole,y=a.useState({}),g=y[0],_=y[1],b=d.useList({listUrl:"/t-apis/public/algorithm_info"}),E=b[0],j=b[1],k=function(){var e=window.location,t=e.host,n=e.protocol;return window.location.href=n+"//"+t+"/apis/common/ai-logout"},w=function(e){var t=window.location.pathname;["/base/swagger/main"].find((function(e){return t.includes(e)}))||(null===e&&h.replace("/home"),e===c.EUserRole.adm&&(t.startsWith("/base")||h.replace("/base/dataset/list")),e===c.EUserRole.normal&&(t.startsWith("/user")||h.replace("/user/panel")))},M=a.useMemo((function(){var e=[],t={icon:"setting",title:"操作平台",items:E.map((function(e){return{title:e.algorithm_name,url:"/user/model/"+e.id+"/"+encodeURIComponent(e.algorithm_name)+"/my"}}))};return r&&e.push(t),e}),[r,E]),x=i.useComputed((function(){return{get value(){var e={val:c.EUserRole.normal,label:"切换到普通用户"},t={val:c.EUserRole.adm,label:"切换到算法管理员"};return v.role===c.EUserRole.normal?[t]:v.role===c.EUserRole.adm?[e]:[e,t]}}}));return a.useEffect((function(){n&&s.http.get({url:"/t-apis/user_info"}).then((function(e){var t=e.status,n=e.data;200===t&&_(n)}))}),[n]),a.useEffect((function(){r&&j.load("")}),[r]),a.useEffect((function(){v.initRole().then(w)}),[]),i.useObserver((function(){return a.default.createElement(m,null,a.default.createElement("div",{className:"con-app-header"},a.default.createElement("div",{className:"content-block"},a.default.createElement("div",{className:"logo-block"},a.default.createElement("img",{className:"logo",src:"/dist/img/cvte.png"}),a.default.createElement("a",{className:"title"},"算法模型训练平台")),a.default.createElement("div",{className:"menu-block"},a.default.createElement(o.Menu,{theme:"dark",mode:"horizontal"},M.map((function(e,t){return a.default.createElement(p,{key:t,title:a.default.createElement("span",{className:"submenu-title-wrapper"},!!e.icon&&a.default.createElement(o.Icon,{type:e.icon}),e.title)},(e.items||[]).map((function(e,t){return a.default.createElement(o.Menu.Item,{onClick:function(){return!!e.url&&h.push(e.url)},key:t},e.title)})))}))))),n&&a.default.createElement("div",{className:"user-block"},a.default.createElement(o.Dropdown,{overlay:a.default.createElement(o.Menu,null,x.value.map((function(e,t){return a.default.createElement(o.Menu.Item,{key:t},a.default.createElement("a",{onClick:function(t){return n=e.val,void v.setRole(n).then((function(){n===c.EUserRole.adm&&h.replace("/base/dataset/list"),n===c.EUserRole.normal&&h.replace("/user/panel")}));var n}},e.label))})))},a.default.createElement(o.Icon,{type:"swap",style:{color:"#fff",marginRight:15}})),a.default.createElement(o.Dropdown,{overlay:a.default.createElement(o.Menu,null,a.default.createElement(o.Menu.Item,null,a.default.createElement("a",{onClick:k},"退出登陆 ",a.default.createElement(o.Icon,{type:"arrow-right"}))))},a.default.createElement(o.Avatar,{size:"large",style:{color:"#fff",backgroundColor:"#1890ff"}},g.username)))))}))}},241:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1195),l=r(n(1196)),i=a.createStore({UserRole:l.default}),o=i.useStore,s=i.StoreProvider;t.useStore=o,t.StoreProvider=s},242:function(e,t,n){"use strict";var r,a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.user=0]="user",e[e.org=1]="org",e[e.custom=2]="custom"}(r||(r={})),t.EOrgUserType=r,function(e){e[e.normal=0]="normal",e[e.adm=1]="adm",e[e.superAdm=2]="superAdm"}(a||(a={})),t.EUserRole=a},483:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(151)),o=l(n(0)),s=n(30),u=n(19),c=n(23),d=n(80);t.DeployList=function(e){var t=e.url,n=s.useList({listUrl:""}),a=n[0],l=n[1],f=function(e){var t="test".toLowerCase().includes("prod")?"http://server.research.cvte.cn/projectEnvironment?id":"http://10.22.21.27:8090/projectEnvironment?id=";window.open(""+t+e.deploy_project_id)},m=o.useMemo((function(){return c.createColumns(a,a[0],{service_name:{title:"服务名称",fixed:"left",render:function(e){return o.default.createElement("a",{onClick:function(t){return f(e)}},e.service_name)}},state:{title:"状态",render:function(e){return o.default.createElement("span",null,d.findDicCN("deploy.state",e.state))}},replicas:"实例个数",deploy_type:{title:"类型",render:function(e){return o.default.createElement("span",null,d.findDicCN("deploy.type",e.deploy_type))}},api_address:{title:"api地址",render:function(e){return o.default.createElement(u.Tooltip,{title:e.api_address},o.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},e.api_address))}},config:{title:"配置",render:function(e){return o.default.createElement(u.Tooltip,{title:e.config},o.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},e.config))}},gpu_need:"gpu( GiB )",mem_limit:"内存( MiB )",cpu_limit:"cpu( Core )"},{customs:[{render:function(e){return 2===e.state?o.default.createElement("a",{onClick:function(t){return function(e){"test".toLowerCase().includes("prod");u.notification.info({description:"提示",message:"准备中...."}),c.http.get({url:"/t-apis/deploy/api_config?deploy_id="+e.id}).then((function(e){var t=e.status,n=e.data;if(200===t)try{var a,l="",o={},s="",d="",f=i.default.load(n),m=f.schemes,p=f.host,h=f.basePath,v=f.paths;l=p+h,l=m.find((function(e){return e.includes("https")}))?"https://"+l:"http://"+l;var y=Object.entries(v)[0],g=y[0],_=y[1];l+=""+g;var b=Object.entries(_)[0],E=b[0],j=b[1];a=E;var k=j.parameters,w=k.filter((function(e){return"body"===e.in}));k.filter((function(e){return"header"===e.in})).map((function(e){var t;o=r(r({},o),((t={})[e.name]=e.default,t))})),w.map((function(e){Object.entries(e.schema.properties||{}).map((function(e){var t=e[0];e[1];t.startsWith("base64")?s=t:d+=t+","}))})),c.openWindowWithPost("http://ai-public-service.research.cvte.cn:30040/apis/docking/train-model/img",{url:l,method:a,more:1,base64_key:s,customparams:d,"tmi-auth":o})}catch(e){u.notification.error({description:"提示",message:"解析错误，请联系开发"}),console.log(i.default.load(n)),console.log(e)}}))}(e)}},"在线测试"):""}},{render:function(e){return o.default.createElement("a",{onClick:function(t){return function(e){var t="/t-apis/deploy/api_config?deploy_id="+e.id;window.open("/base/swagger/main?q="+encodeURIComponent(t))}(e)}},"接口文档")}},{render:function(e){return o.default.createElement("a",{onClick:function(t){return f(e)}},"服务管理")}}]})}),[a]);return o.useEffect((function(){t&&l.load(decodeURIComponent(t))}),[t]),o.default.createElement(u.Table,r({},m,{scroll:{x:2e3,y:550},pagination:{pageSize:5},loading:l.isLoading}))}},560:function(e,t,n){e.exports=n(561)},561:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(9)),l=n(568);n(1228),a.render(l.router,document.getElementById("example"))},568:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(572),o=n(1202),s=n(1205),u=n(241);n(1226),t.router=a.createElement(u.StoreProvider,null,a.createElement(l.BrowserRouter,null,a.createElement(l.Switch,null,a.createElement(l.Route,{path:"/base",component:i.Base}),a.createElement(l.Route,{path:"/home",component:o.Home}),a.createElement(l.Route,{path:"/user",component:s.User}),a.createElement(l.Redirect,{exact:!0,from:"/",to:"/home"}))))},572:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(19),o=n(852),s=n(879),u=n(890),c=n(892),d=n(915),f=n(240),m=n(1199);n(1200);var p=i.Menu.SubMenu,h=i.Layout.Content,v=i.Layout.Sider;t.Base=function(e){var t=e.location,n=a.useState(!0),r=n[0],y=n[1],g=a.useState([]),_=g[0],b=g[1],E=a.useMemo((function(){return[{title:"数据集管理",icon:"bar-chart",url:"/base/dataset/list"},{title:"算法&模型",icon:"bg-colors",url:"/base/algorithm/list"},{title:"训练管理",icon:"thunderbolt",url:"/base/train/list"},{title:"部署管理",icon:"rocket",url:"/base/deploy/list"}]}),["/base"]);return a.useEffect((function(){var e=t.pathname;if(e){var n=E.findIndex((function(t){return t.url.includes(e)}));b([String(n)])}}),[]),a.useEffect((function(){var e=t.pathname;["/base/swagger/main"].find((function(t){return e.includes(t)}))&&y(!1)}),[]),a.default.createElement(i.Layout,{className:"p-base",style:{height:"100vh"}},a.default.createElement(f.AppHeader,{showUser:!0,showUserAlgorithm:!1}),a.default.createElement(i.Layout,null,a.default.createElement(v,{width:r?200:0},a.default.createElement(i.Menu,{mode:"inline",selectedKeys:_,style:{height:"100%",borderRight:0},defaultOpenKeys:E.map((function(e){return e.title})),onClick:function(e){return b([e.key])}},E.map((function(e,t){return e.items?a.default.createElement(p,{key:e.title,title:a.default.createElement("span",null,a.default.createElement(i.Icon,{type:e.icon})," ",e.title)},e.items.map((function(e,n){return a.default.createElement(i.Menu.Item,{key:t+"-"+n},a.default.createElement(l.Link,{to:e.url},e.title))}))):a.default.createElement(i.Menu.Item,{key:t},a.default.createElement(l.Link,{to:e.url},a.default.createElement(i.Icon,{type:e.icon}),e.title))})))),a.default.createElement(i.Layout,{style:{padding:"0 24px 24px"}},a.default.createElement(h,{style:{margin:0,padding:24,background:"#fff"}},a.default.createElement("div",{style:{background:"#fff"}},a.default.createElement(m.AppBreadcrumb,null),a.default.createElement(l.Route,{path:"/base/dataset",component:o.Dataset}),a.default.createElement(l.Route,{path:"/base/algorithm",component:s.Algorithm}),a.default.createElement(l.Route,{path:"/base/train",component:u.Train}),a.default.createElement(l.Route,{path:"/base/deploy",component:c.Deploy}),a.default.createElement(l.Route,{path:"/base/swagger",component:d.Swagger}))))))}},611:function(e,t,n){var r={"./af":270,"./af.js":270,"./ar":271,"./ar-dz":272,"./ar-dz.js":272,"./ar-kw":273,"./ar-kw.js":273,"./ar-ly":274,"./ar-ly.js":274,"./ar-ma":275,"./ar-ma.js":275,"./ar-sa":276,"./ar-sa.js":276,"./ar-tn":277,"./ar-tn.js":277,"./ar.js":271,"./az":278,"./az.js":278,"./be":279,"./be.js":279,"./bg":280,"./bg.js":280,"./bm":281,"./bm.js":281,"./bn":282,"./bn.js":282,"./bo":283,"./bo.js":283,"./br":284,"./br.js":284,"./bs":285,"./bs.js":285,"./ca":286,"./ca.js":286,"./cs":287,"./cs.js":287,"./cv":288,"./cv.js":288,"./cy":289,"./cy.js":289,"./da":290,"./da.js":290,"./de":291,"./de-at":292,"./de-at.js":292,"./de-ch":293,"./de-ch.js":293,"./de.js":291,"./dv":294,"./dv.js":294,"./el":295,"./el.js":295,"./en-SG":296,"./en-SG.js":296,"./en-au":297,"./en-au.js":297,"./en-ca":298,"./en-ca.js":298,"./en-gb":299,"./en-gb.js":299,"./en-ie":300,"./en-ie.js":300,"./en-il":301,"./en-il.js":301,"./en-nz":302,"./en-nz.js":302,"./eo":303,"./eo.js":303,"./es":304,"./es-do":305,"./es-do.js":305,"./es-us":306,"./es-us.js":306,"./es.js":304,"./et":307,"./et.js":307,"./eu":308,"./eu.js":308,"./fa":309,"./fa.js":309,"./fi":310,"./fi.js":310,"./fo":311,"./fo.js":311,"./fr":312,"./fr-ca":313,"./fr-ca.js":313,"./fr-ch":314,"./fr-ch.js":314,"./fr.js":312,"./fy":315,"./fy.js":315,"./ga":316,"./ga.js":316,"./gd":317,"./gd.js":317,"./gl":318,"./gl.js":318,"./gom-latn":319,"./gom-latn.js":319,"./gu":320,"./gu.js":320,"./he":321,"./he.js":321,"./hi":322,"./hi.js":322,"./hr":323,"./hr.js":323,"./hu":324,"./hu.js":324,"./hy-am":325,"./hy-am.js":325,"./id":326,"./id.js":326,"./is":327,"./is.js":327,"./it":328,"./it-ch":329,"./it-ch.js":329,"./it.js":328,"./ja":330,"./ja.js":330,"./jv":331,"./jv.js":331,"./ka":332,"./ka.js":332,"./kk":333,"./kk.js":333,"./km":334,"./km.js":334,"./kn":335,"./kn.js":335,"./ko":336,"./ko.js":336,"./ku":337,"./ku.js":337,"./ky":338,"./ky.js":338,"./lb":339,"./lb.js":339,"./lo":340,"./lo.js":340,"./lt":341,"./lt.js":341,"./lv":342,"./lv.js":342,"./me":343,"./me.js":343,"./mi":344,"./mi.js":344,"./mk":345,"./mk.js":345,"./ml":346,"./ml.js":346,"./mn":347,"./mn.js":347,"./mr":348,"./mr.js":348,"./ms":349,"./ms-my":350,"./ms-my.js":350,"./ms.js":349,"./mt":351,"./mt.js":351,"./my":352,"./my.js":352,"./nb":353,"./nb.js":353,"./ne":354,"./ne.js":354,"./nl":355,"./nl-be":356,"./nl-be.js":356,"./nl.js":355,"./nn":357,"./nn.js":357,"./pa-in":358,"./pa-in.js":358,"./pl":359,"./pl.js":359,"./pt":360,"./pt-br":361,"./pt-br.js":361,"./pt.js":360,"./ro":362,"./ro.js":362,"./ru":363,"./ru.js":363,"./sd":364,"./sd.js":364,"./se":365,"./se.js":365,"./si":366,"./si.js":366,"./sk":367,"./sk.js":367,"./sl":368,"./sl.js":368,"./sq":369,"./sq.js":369,"./sr":370,"./sr-cyrl":371,"./sr-cyrl.js":371,"./sr.js":370,"./ss":372,"./ss.js":372,"./sv":373,"./sv.js":373,"./sw":374,"./sw.js":374,"./ta":375,"./ta.js":375,"./te":376,"./te.js":376,"./tet":377,"./tet.js":377,"./tg":378,"./tg.js":378,"./th":379,"./th.js":379,"./tl-ph":380,"./tl-ph.js":380,"./tlh":381,"./tlh.js":381,"./tr":382,"./tr.js":382,"./tzl":383,"./tzl.js":383,"./tzm":384,"./tzm-latn":385,"./tzm-latn.js":385,"./tzm.js":384,"./ug-cn":386,"./ug-cn.js":386,"./uk":387,"./uk.js":387,"./ur":388,"./ur.js":388,"./uz":389,"./uz-latn":390,"./uz-latn.js":390,"./uz.js":389,"./vi":391,"./vi.js":391,"./x-pseudo":392,"./x-pseudo.js":392,"./yo":393,"./yo.js":393,"./zh-cn":394,"./zh-cn.js":394,"./zh-hk":395,"./zh-hk.js":395,"./zh-tw":396,"./zh-tw.js":396};function a(e){var t=l(e);return n(t)}function l(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=l,e.exports=a,a.id=611},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);t.DIC={dataset:{is_training:[{value:-1,label:"不在训练"},{value:1,label:"训练中"}]},model:{shelves:[{value:0,label:"未上架"},{value:1,label:"已上架"}],version_state:[{value:-2,label:"模型取消训练"},{value:-1,label:"模型训练失败"},{value:0,label:"正在排队"},{value:1,label:"正在训练"},{value:2,label:"模型训练成功"},{value:3,label:"正在打包"},{value:4,label:"打包完成"},{value:5,label:"打包失败"}]},train:{state:[{value:-2,label:"取消训练"},{value:-1,label:"训练失败"},{value:0,label:"默认状态"},{value:1,label:"正在训练"},{value:2,label:"训练成功"},{value:3,label:"全部"}]},deploy:{type:[{value:1,label:"在线部署"},{value:2,label:"离线部署"}],state:[{value:1,label:"创建中"},{value:2,label:"部署成功"},{value:3,label:"错误"},{value:4,label:"注册"}]},project:{envType:[{value:1,label:"开发"},{value:2,label:"测试"},{value:3,label:"预发布环境"},{value:4,label:"容灾环境"},{value:5,label:"生产环境"}]}};var a=r.generateDic(t.DIC),l=a.findDicCN,i=a.findDic;t.findDicCN=l,t.findDic=i},852:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(853);t.Dataset=function(){return a.default.createElement("div",null,a.default.createElement(l.Route,{path:"/base/dataset/list",component:i.List}))}},853:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),i=n(23),o=n(19),s=n(80),u=n(150),c=n(30);t.List=function(e){var t=c.useList({listUrl:"/t-apis/dataset/list"}),n=t[0],a=t[1],d=l.useMemo((function(){return i.createColumns(n,n[0],{dataset_name:{title:"名称",fixed:"left",render:function(e){return l.default.createElement("a",null,e.dataset_name)}},bucket_name:"桶名",s3_name:"远程存储",create_time:{title:"创建时间",render:function(e){return l.default.createElement("span",null,u.transferTime2CN(e.create_time))}},description:"备注",is_training:{title:"训练中",fixed:"right",render:function(e){return l.default.createElement("a",null,s.findDicCN("dataset.is_training",e.is_training))}}})}),[n]);return l.useEffect((function(){a.load("")}),[]),l.default.createElement("div",{className:"animated fadeIn"},l.default.createElement(o.PageHeader,{title:"数据集管理",subTitle:l.default.createElement("div",{onClick:function(){var e="test".toLowerCase().includes("prod")?"http://drive.research.cvte.cn/":"http://10.22.21.26:9081/#/dashboard";window.open(e)},style:{cursor:"pointer"}},l.default.createElement(o.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:5,marginLeft:15}}),"查看更多")}),l.default.createElement(o.Table,r({},d,{scroll:{x:1300,y:550},pagination:{pageSize:5},loading:a.isLoading})))}},879:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(880),o=n(881);t.Algorithm=function(){return a.default.createElement("div",null,a.default.createElement(l.Route,{path:"/base/algorithm/list",component:i.List}),a.default.createElement(l.Route,{path:"/base/algorithm/model/:id",component:o.modelDetail}))}},880:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),i=n(31),o=n(23),s=n(19),u=n(23),c=n(30),d=n(150);t.List=s.Form.create({name:"algorithm-list"})((function(e){var t=e.form,n=l.useState(!1),a=n[0],f=n[1],m=l.useState(""),p=m[0],h=m[1],v=c.useList({listUrl:"/t-apis/algorithm/all"}),y=v[0],g=v[1],_=function(e){u.http.post({data:e,successMsg:"创建成功",url:"/t-apis/algorithm/create"}).then((function(e){200===e.status&&(k(),f(!1),t.resetFields())}))},b=function(e){u.http.post({data:r(r({},e),{id:p}),successMsg:"更新成功",url:"/t-apis/algorithm/modify"}).then((function(e){200===e.status&&(k(),f(!1),t.resetFields())}))},E=function(e){var n=e.algorithm_name,r=e.description;f(!0),h(e.id),t.setFieldsValue({description:r,algorithm_name:n})},j=function(e){s.Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){u.http.post({data:{id:e.id},successMsg:"删除成功",url:"/t-apis/algorithm/delete"}).then((function(e){200===e.status&&k()}))}})},k=function(){g.load("")},w=l.useMemo((function(){return o.createColumns(y,y[0],{algorithm_name:{title:"名称",fixed:"left",render:function(e){return l.default.createElement(i.Link,{to:"/base/algorithm/model/"+e.id+"?name="+encodeURIComponent(e.algorithm_name)},e.algorithm_name)}},description:{title:"描述",render:function(e){return l.default.createElement(s.Tooltip,{title:e.description},l.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},e.description))}},create_time:{title:"创建时间",render:function(e){return l.default.createElement("span",null,d.transferTime2CN(e.create_time))}}},{edit:E,delete:j,customs:[{render:function(e){return l.default.createElement(i.Link,{to:"/base/algorithm/model/"+e.id+"?name="+encodeURIComponent(e.algorithm_name)},"模型")}}]})}),[y]),M=l.useMemo((function(){return[{key:"algorithm_name",label:"名称",type:"input",placeholder:"请填写算法名称",rules:[{required:!0,message:"请填写算法名称"}]},{key:"description",label:"描述",type:"input",placeholder:"算法描述",rules:[]}]}),[]);return l.useEffect((function(){k()}),[]),l.default.createElement("div",{className:"animated fadeIn"},l.default.createElement(s.PageHeader,{title:"算法管理"}),l.default.createElement("div",{style:{paddingLeft:20,marginBottom:20}},l.default.createElement(s.Button,{type:"primary",onClick:function(e){h(""),f(!0),t.resetFields()}},"创建算法")),l.default.createElement(s.Table,r({},w,{scroll:{x:1300,y:550},pagination:{pageSize:5},loading:g.isLoading})),l.default.createElement(s.Modal,{title:p?"编辑":"创建",visible:a,onCancel:function(e){return f(!1)},onOk:function(e){t.validateFields((function(e,t){e||(p?b(t):_(t))}))}},l.default.createElement(s.Form,{labelCol:{sm:{span:4},xs:{span:4}},wrapperCol:{sm:{span:20},xs:{span:20}}},M.map((function(e,n){return l.default.createElement(s.Form.Item,{key:n,label:e.label},t.getFieldDecorator(e.key,{rules:e.rules,valuePropName:"switch"===e.type?"checked":"value"})("input"===e.type?l.default.createElement(s.Input,{disabled:!!e.disabled,placeholder:e.placeholder||""}):l.default.createElement("div",null)))})))))}))},881:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(23),i=n(30),o=n(30),s=n(23),u=n(62),c=a(n(0)),d=n(19),f=n(80),m=n(150),p=n(885),h=n(886),v=n(889);t.modelDetail=function(e){c.useRef(null);var t=c.useRef(""),n=c.useRef(""),a=c.useState(""),y=a[0],g=a[1],_=c.useState(""),b=_[0],E=_[1],j=c.useState({}),k=j[0],w=j[1],M=c.useState(""),x=(M[0],M[1]),O=c.useState(""),C=O[0],S=O[1],L=c.useState(!1),I=L[0],P=L[1],R=c.useState(!1),N=R[0],D=R[1],T=c.useState(!1),U=T[0],z=T[1],F=c.useState(!1),q=F[0],A=F[1],B=c.useState(!1),H=B[0],V=B[1],W=o.useInterval(q,8e3)[0],J=o.useInterval(H,5e3)[0],K=i.useList({listUrl:"/t-apis/scenarios/all"}),G=K[0],Q=K[1],Y=i.useList({listUrl:"/t-apis/model/src_models"}),X=Y[0],Z=Y[1],$=i.useList({listUrl:"/t-apis/model/versions"}),ee=$[0],te=$[1],ne=function(e){Z.load("?algorithm_id="+(e||y))},re=function(e){te.load({successMsg:!1,params:{model_id:""+(e||t.current)},listUrl:"/t-apis/model/versions"})},ae=function(e){l.http.post({data:r(r({},e),{model_id:b,algorithm_id:y}),successMsg:"更新成功",url:"/t-apis/model/modify"}).then((function(e){200===e.status&&setTimeout((function(){ne(),z(!1)}),20)}))},le=function(e){var n=r({},e),a=n.scenarios_ids;delete n.id,z(!0),E(e.id),t.current=e.id,w(r(r({},n),{scenarios_ids:(a||"").split(",")})),Q.load("?algorithm_id="+y)},ie=function(e){l.http.post({data:r(r({},e),{algorithm_id:y}),successMsg:"创建成功",url:"/t-apis/model/upload"}).then((function(e){200===e.status&&(ne(),z(!1))}))},oe=function(e){d.Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){l.http.post({data:{model_id:e.id,algorithm_id:y},successMsg:"删除成功",url:"/t-apis/model/del_src_model"}).then((function(e){200===e.status&&ne()}))}})},se=function(e){l.http.get({params:{model_version_id:e.id},url:"/t-apis/deploy/offline_tar"}).then((function(e){var t=e.status,n=e.data;200===t&&n&&(window.location.href=n)}))},ue=function(){l.http.get({successMsg:!1,params:{model_version_id:n.current},url:"/t-apis/deploy/offline_log"}).then((function(e){var t=e.status,n=e.data;200===t&&n&&S(n)}))},ce=function(e){var t=1===e.model_shelves?"/model/take_off":"/model/shelves",n=1===e.model_shelves?"下架":"上架";d.Modal.confirm({title:"提示",content:"确定"+n+"吗？",onOk:function(){l.http.post({data:{model_id:e.id},successMsg:n+"成功",url:"/t-apis"+t}).then((function(e){200===e.status&&ne()}))}})},de=c.useMemo((function(){return[{title:"基本信息",formItems:[{key:"model_name",label:"名称",type:"input",placeholder:"请填写模型名称",rules:[{required:!0,message:"请填写模型名称"}]},{key:"train_cmd",label:"训练命令",type:"input",placeholder:"请填写训练命令",rules:[{required:!0,message:"请填写训练命令"}]},{key:"image_tag",label:"镜像标签",type:"input",placeholder:"请填写镜像标签",rules:[{required:!0,message:"请填写镜像标签"}]},{key:"dataset_path",label:"数据集路径",type:"input",placeholder:"容器内绝对路径，开头为：/ ",rules:[{required:!0,message:"请填写数据集路径"},{pattern:/^\//,message:"绝对路径以 / 为开头"}]},{key:"model_path",label:"模型保存路径",type:"input",placeholder:"容器内绝对路径，开头为：/ ",rules:[{required:!0,message:"请填写模型保存路径"},{pattern:/^\//,message:"绝对路径以 / 为开头"}]},{key:"result_check_file_local",label:"文件输出路径",type:"input",placeholder:"容器内绝对路径，开头为：/ ",rules:[{required:!0,message:"请填写文件输出路径"},{pattern:/^\//,message:"绝对路径以 / 为开头"}]}]},{title:"部署设置",formItems:[{key:"deploy_cmd",label:"部署命令",type:"input",placeholder:"请填写部署命令",rules:[{required:!0,message:"请填写部署命令"}]},{key:"cpu_limit",label:"cpu限制",type:"select",placeholder:"请选择cpu限制",options:[{value:.25,label:"0.25Core"},{value:.5,label:"0.5Core"},{value:1,label:"1Core"},{value:2,label:"2Core"},{value:4,label:"4Core"},{value:8,label:"8Core"},{value:12,label:"12Core"},{value:16,label:"16Core"},{value:32,label:"32Core"},{value:64,label:"64Core"}],rules:[{required:!0,message:"请选择cpu限制"}]},{min:0,key:"gpu_need",label:"gpu限制",type:"number",placeholder:"请填写gpu限制",rules:[{required:!0,message:"请填写gpu限制"}],formatter:function(e){return e+"GiB"},parser:function(e){return e.replace("GiB","")}},{min:0,key:"mem_limit",label:"内存限制",type:"number",placeholder:"请填写内存限制",rules:[{required:!0,message:"请填写内存限制"}],formatter:function(e){return e+"MiB"},parser:function(e){return e.replace("MiB","")}}]},{title:"其他",formItems:[{key:"scenarios_ids",label:"应用场景",type:"checkbox",rules:[],options:G.map((function(e){return{value:e.id,label:e.scenarios}}))},{key:"description",label:"描述",type:"input",placeholder:"请填写描述",rules:[]},{key:"config_tmpl",label:"配置模版",type:"textarea",placeholder:"请填写配置模版",rules:[]},{key:"api_mook_tmpl",label:"接口mock模板",type:"textarea",placeholder:"请填写接口mock模板",rules:[]}]}]}),[G]),fe=c.useMemo((function(){return s.createColumns(X,X[0],{model_name:{title:"名称",render:function(e){return e.img_exist?c.default.createElement("span",null,e.model_name):c.default.createElement(d.Tooltip,{title:"镜像创建失败，请联系工程组"},c.default.createElement(d.Tag,{color:"red"},e.model_name))}},model_shelves:{title:"上下架",render:function(e){return c.default.createElement("span",null,f.findDicCN("model.shelves",e.model_shelves))}},dataset_path:"数据集",train_cmd:"训练命令",deploy_cmd:"发布命令"},{edit:le,delete:oe,customs:[{render:function(e){return e.img_exist?c.default.createElement("a",{onClick:function(n){return function(e){P(!0),E(e.id),t.current=e.id}(e)}},"训练"):""}},{render:function(e){return e.img_exist?c.default.createElement("a",{onClick:function(n){return function(e){D(!0),E(e.id),t.current=e.id}(e)}},"部署"):""}},{render:function(e){return 0===e.model_shelves&&e.img_exist?c.default.createElement("a",{onClick:function(t){return ce(e)}},"上架"):""}},{render:function(e){return 1===e.model_shelves&&e.img_exist?c.default.createElement("a",{onClick:function(t){return ce(e)}},"下架"):""}},{render:function(e){return c.default.createElement("a",{onClick:function(n){return function(e){A(!0),E(e.id),re(e.id),t.current=e.id}(e)}},"版本")}}]})}),[X]),me=c.useMemo((function(){return s.createColumns(ee,ee[0],{model_version_name:{title:"名称",fixed:"left",render:function(e){return c.default.createElement("a",null,e.model_version_name)}},state:{title:"状态",render:function(e){return 3===e.state||4===e.state||5===e.state?c.default.createElement("a",{onClick:function(){return function(e){3!==e.state&&4!==e.state&&5!==e.state||(V(!0),x(e.id),n.current=e.id,ue())}(e)}},f.findDicCN("model.version_state",e.state)):c.default.createElement("span",null,f.findDicCN("model.version_state",e.state))}},result_model_remote:{title:"远程结果",render:function(e){return c.default.createElement(d.Tooltip,{title:e.result_model_remote},c.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},e.result_model_remote))}},tar_error_msg:{title:"镜像错误信息",render:function(e){return c.default.createElement(d.Tooltip,{title:e.tar_error_msg},c.default.createElement("span",{style:{width:120,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block"}},e.tar_error_msg))}},create_time:"创建时间"},{customs:[{render:function(e){return 2===e.state||4===e.state?c.default.createElement("a",{onClick:function(t){return function(e){if(4===e.state)return se(e);l.http.post({data:{model_version_id:e.id},successMsg:"正在打包",url:"/t-apis/deploy/offline_tar"}).then((function(e){200===e.status&&re(b)}))}(e)}},"获取离线包"):""}},{render:function(e){return c.default.createElement("a",{onClick:function(t){return function(e){d.Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){l.http.post({data:{version_id:e.id},successMsg:"删除成功",url:"/t-apis/model/del_version"}).then((function(e){200===e.status&&re()}))}})}(e)}},"删除")}}]})}),[ee]);return c.useEffect((function(){J((function(){return ue()}))}),[]),c.useEffect((function(){W((function(){return re()}))}),[]),c.useEffect((function(){var t=e.match.params.id;ne(t),g(t)}),[]),c.default.createElement("div",{className:"animated fadeIn"},c.default.createElement(d.PageHeader,{title:"模型管理",subTitle:"算法 "+decodeURIComponent((e.location.search||"").split("=")[1]||"")}),c.default.createElement("div",{style:{padding:"10px 20px 30px"}},c.default.createElement(v.AlgorithmScene,{aid:y})),c.default.createElement("div",{style:{paddingLeft:20,marginBottom:20}},c.default.createElement(d.Button,{type:"primary",onClick:function(e){z(!0),E(""),w({}),t.current="",Q.load("?algorithm_id="+y)}},"创建模型")),c.default.createElement(d.Table,r({},fe,{scroll:{x:1600,y:550},pagination:{pageSize:5},loading:Z.isLoading,expandedRowRender:function(e){return c.default.createElement("div",null,"【镜像标签】",e.image_tag,"【创建时间】",m.transferTime2CN(e.create_time)," 【更新时间】",m.transferTime2CN(e.create_time)," 【描述】",e.description||"暂无")}})),c.default.createElement(d.Modal,{width:700,footer:null,visible:U,onCancel:function(e){return z(!1)},title:b?"编辑模型":"创建模型"},c.default.createElement("div",{style:{padding:"0 100px"}},c.default.createElement(u.StepsForm,{onOk:function(e){var t=e.scenarios_ids,n=r({},e);Array.isArray(t)&&(n=r(r({},n),{scenarios_ids:t.join(",")})),b?ae(n):ie(r(r({},n),{algorithm_id:y}))},forms:de,defaultValue:k,formName:"algorithm-model-detail"}))),c.default.createElement(d.Modal,{title:"版本",width:950,footer:null,visible:q,onCancel:function(e){return A(!1)}},c.default.createElement(d.Table,r({},me,{scroll:{x:1300,y:520},pagination:{pageSize:5}}))),c.default.createElement(d.Modal,{width:900,title:"打包日志",footer:null,visible:H,onCancel:function(e){return V(!1)},bodyStyle:{background:"#000"}},c.default.createElement("pre",{style:{minHeight:280,maxHeight:450,overflow:"auto",color:"#fff",whiteSpace:"pre-line"}},C)),c.default.createElement(p.TrainModel,{show:I,modelId:b,onClose:function(){return P(!1)}}),c.default.createElement(h.DeployModel,{show:N,modelId:b,onClose:function(){return D(!1)}}))}},885:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),i=n(19),o=n(30),s=n(23),u=n(62).MyForm("train-model");t.TrainModel=function(e){var t=l.useRef(null),n=o.useList({listUrl:"/t-apis/dataset/list"}),a=n[0],c=n[1],d=o.useList({listUrl:"/t-apis/model/versions"}),f=d[0],m=d[1],p=l.useMemo((function(){var e="test".toLowerCase().includes("prod")?"http://drive.research.cvte.cn/":"http://10.22.21.26:9081/#/dashboard";return[{key:"dataset_manage_id",label:"数据集",type:"select",placeholder:"请选择数据集",options:a.map((function(e){return{value:e.dataset_manage_id,label:e.dataset_name}})),rules:[{required:!0,message:"请选择数据集"}],extra:l.default.createElement("div",{style:{cursor:"pointer"},onClick:function(){return window.open(e)}},l.default.createElement(i.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:8}}),"创建数据集")},{key:"base_model_version_id",label:"版本",type:"select",placeholder:"请选择版本",options:f.map((function(e){return{value:e.id,label:e.model_version_name}})),rules:[{required:!0,message:"请选择版本"}]},{key:"model_version_name",label:"名称",type:"input",placeholder:"请填写名称",rules:[{required:!0,message:"请填写名称"}]},{key:"description",label:"描述",type:"input",placeholder:"请填写描述",rules:[]}]}),[f,a]);return l.useEffect((function(){var t;e.show&&(c.load(""),(t=e.modelId)&&m.load("?model_id="+t))}),[e.modelId,e.show]),l.useEffect((function(){var e=t.current;e&&e.resetFields()}),[e.show]),l.default.createElement(i.Drawer,{title:"开始训练",placement:"right",width:450,closable:!1,visible:e.show,onClose:e.onClose},l.default.createElement(u,{ref:t,formItems:p}),l.default.createElement("div",{style:{paddingTop:20,textAlign:"right"}},l.default.createElement(i.Button,{type:"primary",onClick:function(){t.current.validateFields((function(t,n){t||s.http.post({data:r({},n),url:"/t-apis/train/start"}).then((function(t){200===t.status&&e.onClose&&e.onClose()}))}))}},"提交")))}},886:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(19),i=n(887),o=n(888);t.DeployModel=function(e){var t=e.show,n=e.modelId,r=e.onClose;return a.default.createElement(l.Drawer,{title:"发布/部署",placement:"right",width:550,closable:!1,visible:t,onClose:r},a.default.createElement(l.Tabs,{defaultActiveKey:"1"},a.default.createElement(l.Tabs.TabPane,{tab:"在线部署",key:"1"},a.default.createElement(i.DeployOnline,{show:t,onClose:r,modelId:n})),a.default.createElement(l.Tabs.TabPane,{tab:"离线部署",key:"2"},a.default.createElement(o.DeployOffline,{show:t,onClose:r,modelId:n}))))}},887:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),i=n(19),o=n(23),s=n(80),u=n(30),c=n(62).MyForm("deploy-form");t.DeployOnline=function(e){var t=e.show,n=e.modelId,a=e.onClose,d=l.useRef(null),f=l.useState({}),m=f[0],p=(f[1],u.useList({listUrl:"/t-apis/model/versions"})),h=p[0],v=p[1],y=u.useList({listUrl:"/t-apis/project/list"}),g=y[0],_=y[1],b=l.useMemo((function(){var e="test".toLowerCase().includes("prod"),t=Object.keys(g).map((function(e){return{label:e,value:e,children:g[e].map((function(e){return{value:""+e.id,label:s.findDicCN("project.envType",e.env_type)}}))}})),n=e?"http://server.research.cvte.cn":"http://10.22.21.27:8090";return[{key:"project_id",label:"项目",type:"cascader",placeholder:"请选择项目",options:t,rules:[{required:!0,message:"请选择项目"}],extra:l.default.createElement("div",{style:{cursor:"pointer"},onClick:function(){return window.open(n)}},l.default.createElement(i.Icon,{theme:"twoTone",type:"info-circle",style:{marginRight:8}}),"创建项目")},{key:"model_version_id",label:"模型版本",type:"select",placeholder:"请选择模型版本",options:h.map((function(e){return{value:e.id,label:e.model_version_name}})),rules:[{required:!0,message:"请选择模型版本"}]},{key:"app_name",label:"名称",type:"input",placeholder:"请填写名称",rules:[{required:!0,message:"请填写名称"}]},{min:0,key:"replicas",label:"实例个数",type:"number",defaultValue:1,placeholder:"请填写实例个数",rules:[{required:!0,message:"请填写实例个数"}],extra:l.default.createElement("div",{style:{fontSize:12}},"多实例可提高并发，但会消耗更多资源")}]}),[g,h]);return l.useEffect((function(){t&&(_.load(""),v.load("?model_id="+n))}),[n,t]),l.default.createElement("div",null,l.default.createElement(c,{ref:d,formItems:b}),l.default.createElement("div",{style:{marginLeft:40,marginTop:40}},l.default.createElement(i.Button,{type:"primary",onClick:function(){var e=d.current;e.validateFields((function(t,n){var l=n.project_id;t||o.http.post({data:r(r({},n),{env:JSON.stringify(m),project_id:l[1]}),successMsg:"部署成功",url:"/t-apis/deploy/online"}).then((function(t){200===t.status&&(a&&a(),e.resetFields())}))}))}},"确定")))}},888:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),i=n(19),o=n(23),s=n(30),u=n(62).MyForm("deploy-offline-form");t.DeployOffline=function(e){var t=e.show,n=e.modelId,a=e.onClose,c=l.useRef(null),d=l.useState({}),f=d[0],m=(d[1],s.useList({listUrl:"/t-apis/model/versions"})),p=m[0],h=m[1],v=l.useMemo((function(){return[{key:"model_version_id",label:"模型版本",type:"select",placeholder:"请选择模型版本",options:p.map((function(e){return{value:e.id,label:e.model_version_name}})),rules:[{required:!0,message:"请选择模型版本"}]},{key:"app_name",label:"名称",type:"input",placeholder:"请填写名称",rules:[{required:!0,message:"请填写名称"}]},{key:"api_address",label:"接口地址",type:"input",placeholder:"请填写接口地址",rules:[{required:!0,message:"请填写接口地址"}]},{key:"description",label:"描述",type:"input",placeholder:"请填写描述",rules:[]}]}),[p]);return l.useEffect((function(){t&&h.load("?model_id="+n)}),[n,t]),l.default.createElement("div",null,l.default.createElement(u,{ref:c,formItems:v}),l.default.createElement("div",{style:{marginLeft:40,marginTop:40}},l.default.createElement(i.Button,{type:"primary",onClick:function(){var e=c.current;e.validateFields((function(t,n){t||o.http.post({data:r(r({},n),{env:JSON.stringify(f)}),successMsg:"部署成功",url:"/t-apis/deploy/offline_add"}).then((function(t){200===t.status&&(a&&a(),e.resetFields())}))}))}},"确定")))}},889:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=n(19),i=n(30),o=a(n(0)),s=n(62),u=n(23),c=s.MyForm("algorithm-scene");t.AlgorithmScene=function(e){var t=e.aid,n=o.useRef(null),a=o.useState(""),s=a[0],d=a[1],f=o.useState(!1),m=f[0],p=f[1],h=i.useList({listUrl:"/t-apis/scenarios/all"}),v=h[0],y=h[1],g=function(e){u.http.post({data:{config_list:[e]},successMsg:s?"更新成功":"添加成功",url:"/t-apis/scenarios/set_config"}).then((function(e){var r=e.status,a=n.current;200===r&&(d(""),a.resetFields(),p(!1),y.load("?algorithm_id="+t))}))},_=o.useMemo((function(){return[{key:"scenarios",label:"场景名称",type:"input",placeholder:"请填写场景名称",rules:[{required:!0,message:"请填写场景名称"}]},{key:"description",label:"描述",type:"textarea",placeholder:"场景描述",rules:[{required:!0,message:"请填写场景名称"}]}]}),[]);return o.useEffect((function(){t&&y.load("?algorithm_id="+t)}),[t]),o.default.createElement("div",null,v.map((function(e,t){return o.default.createElement("a",{key:t,onClick:function(){return r=(t=e).id,a=t.scenarios,l=t.description,p(!0),d(r),void setTimeout((function(){n.current.setFieldsValue({scenarios:a,description:l})}),0);var t,r,a,l}},o.default.createElement(l.Tag,{color:"cyan"},e.scenarios))})),o.default.createElement("a",{onClick:function(){return p(!0),d(e||""),void setTimeout((function(){var t=n.current;!e&&t.resetFields()}),0);var e}},o.default.createElement(l.Tag,{color:"blue",style:{borderStyle:"dashed"}},o.default.createElement(l.Icon,{type:"plus"})," 应用场景")),o.default.createElement(l.Modal,{title:(s?"更新":"添加")+"场景",visible:m,onCancel:function(){return p(!1)},footer:o.default.createElement("div",null,s&&o.default.createElement(l.Button,{ghost:!0,type:"danger",onClick:function(){l.Modal.confirm({title:"提示",content:"确认删除该场景吗？",onOk:function(){u.http.post({data:{scenarios_id:s},successMsg:"删除成功",url:"/t-apis/scenarios/delete"}).then((function(e){var r=e.status,a=n.current;200===r&&(d(""),a.resetFields(),p(!1),y.load("?algorithm_id="+t))}))}})}},"删除"),o.default.createElement(l.Button,{type:"primary",onClick:function(){n.current.validateFields((function(e,n){if(!e){var a=r(r({},n),{algorithm_id:t});s&&(a=r(r({},a),{scenarios_id:s})),g(a)}}))}},"确定"))},o.default.createElement(c,{ref:n,formItems:_})))}},890:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(891);t.Train=function(){return a.default.createElement("div",null,a.default.createElement(l.Route,{path:"/base/train/list",component:i.List}))}},891:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),i=n(19),o=n(23),s=n(23),u=n(80),c=n(30),d=n(62).MyForm("train-list-filter");t.List=function(e){var t=l.useRef(null),n=l.useState({state:3}),a=n[0],f=n[1],m=l.useState(""),p=m[0],h=m[1],v=l.useState(!1),y=v[0],g=v[1],_=c.useList({listUrl:"/t-apis/train/list"}),b=_[0],E=_[1],j=c.useList({listUrl:"/t-apis/model/src_models"}),k=j[0],w=j[1],M=l.useMemo((function(){return[{key:"state",label:"状态",type:"select",placeholder:"请选择状态",defaultValue:a.state,options:u.findDic("train.state"),rules:[]},{key:"model_id",label:"模型",type:"select",options:(k||[]).map((function(e){return{value:e.id,label:e.model_name}})),rules:[]}]}),[a,k]),x=l.useMemo((function(){return o.createColumns(b,b[0],{dataset_name:{title:"名称",fixed:"left",render:function(e){return l.default.createElement("a",null,e.combination_name)}},base_version_name:"基础模型版本",state:{title:"状态",render:function(e){return l.default.createElement("a",null,u.findDicCN("train.state",e.state))}},start_time:"创建时间",end_time:"结束时间"},{customs:[{render:function(e){return l.default.createElement("a",{onClick:function(t){return function(e){h(""),g(!0),s.http.get({url:"/t-apis/train/log?train_id="+e.train_id}).then((function(e){200===e.status&&h(e.data)}))}(e)}},"查看日志")}},{render:function(e){return l.default.createElement("a",{onClick:function(t){return function(e){i.Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){s.http.post({data:{train_id_list:[e.train_id]},successMsg:"删除成功",url:"/t-apis/train/del_record"}).then((function(e){200===e.status&&E.load({params:a})}))}})}(e)}},"删除")}},{render:function(e){return 0===e.state||"0"===e.state||1===e.state||"1"===e.state?l.default.createElement("a",{onClick:function(t){return function(e){var t=e.train_id;i.Modal.confirm({title:"提示",content:"确认停止训练吗？",onOk:function(){s.http.post({data:{train_id:t},successMsg:"停止成功",url:"/t-apis/train/stop"}).then((function(e){200===e.status&&E.load({params:a})}))}})}(e)}},"停止训练"):""}}]})}),[b]);return l.useEffect((function(){w.load(""),E.load({params:a})}),[]),l.default.createElement("div",{className:"animated fadeIn"},l.default.createElement(i.PageHeader,{title:"训练管理"}),l.default.createElement(i.Card,{style:{marginBottom:35}},l.default.createElement(d,{ref:t,layout:"inline",formItems:M,onChange:function(e){f(e),E.load({params:e})}})),l.default.createElement(i.Table,r({},x,{scroll:{x:1300,y:550},pagination:{pageSize:5},loading:E.isLoading})),l.default.createElement(i.Modal,{width:1e3,footer:null,title:"训练日志",visible:y,onCancel:function(){return g(!1)},bodyStyle:{background:"#000"}},l.default.createElement("pre",{style:{minHeight:280,maxHeight:450,overflow:"auto",color:"#fff",whiteSpace:"pre-line"}},p)))}},892:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(893);t.Deploy=function(){return a.default.createElement("div",null,a.default.createElement(l.Route,{path:"/base/deploy/list",component:i.List}))}},893:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(19),i=n(483);t.List=function(e){return a.default.createElement("div",{className:"animated fadeIn"},a.default.createElement(l.PageHeader,{title:"部署管理"}),a.default.createElement(i.DeployList,{url:"/t-apis/deploy/list"}))}},915:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),l=n(31),i=n(916);t.Swagger=function(){return a.default.createElement("div",null,a.default.createElement(l.Route,{path:"/base/swagger/main",component:i.Main}))}},916:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=r(n(151)),i=r(n(917)),o=a(n(0)),s=n(23);n(1193),t.Main=function(e){var t=o.useState({}),n=t[0],r=t[1];return o.useEffect((function(){var t=e.location.search.split("="),n=(t[0],t[1]);s.http.get({url:decodeURIComponent(n)}).then((function(e){var t=e.status,n=e.data;200===t&&r(l.default.load(n))}))}),[]),o.default.createElement("div",{className:"animated fadeIn",style:{maxHeight:"80vh",overflowY:"scroll"}},!!n&&o.default.createElement(i.default,{spec:n}))}}});